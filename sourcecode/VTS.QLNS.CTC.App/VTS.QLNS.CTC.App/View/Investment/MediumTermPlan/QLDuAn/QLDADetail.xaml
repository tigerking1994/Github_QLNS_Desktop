<Window x:Class="VTS.QLNS.CTC.App.View.Investment.MediumTermPlan.QLDuAn.QLDADetail"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VTS.QLNS.CTC.App.View.Investment.MediumTermPlan.QLDuAn"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
        xmlns:component="clr-namespace:VTS.QLNS.CTC.App.Component"
        xmlns:converters="clr-namespace:VTS.QLNS.CTC.App.Converters"
        xmlns:extensions="clr-namespace:VTS.QLNS.CTC.App.Extensions"
        xmlns:ext="clr-namespace:VTS.QLNS.CTC.App.Extensions" xmlns:qlduan="clr-namespace:VTS.QLNS.CTC.App.ViewModel.Investment.MediumTermPlan.QLDuAn" d:DataContext="{d:DesignInstance Type=qlduan:QLDADetailViewModel}"
        Style="{StaticResource MaterialDesignWindow}" 
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Title="{Binding Title}" Height="768" Width="1280">
    
    <Grid Margin="16">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <DockPanel Grid.Row="0">
                <materialDesign:PackIcon Kind="PlaylistPlus" Style="{StaticResource DialogScreenIconStyle}"/>
                <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="10 0">
                    <TextBlock Text="{Binding Name}" FontWeight="Bold"></TextBlock>
                    <TextBlock Text="{Binding Description}"></TextBlock>
                    <Separator Background="{StaticResource MaterialDesignDivider}" Margin="0 5 0 0"/>
                </StackPanel>
            </DockPanel>
            <Grid
                Margin="0 10 0 0"
                Grid.Row="1">
                <StackPanel
                Orientation="Horizontal">
                    <RadioButton
                        x:Name="RbDuAn"
                        Style="{StaticResource MaterialDesignTabRadioButton}"
                        IsChecked="True"
                        GroupName="TabIndex"
                        Content="THÔNG TIN DỰ ÁN" />
                    <RadioButton
                        x:Name="RbChuTruong"
                        Style="{StaticResource MaterialDesignTabRadioButton}"
                        GroupName="TabIndex"
                        Content="CHỦ TRƯƠNG ĐẦU TƯ" />
                    <RadioButton
                        x:Name="RbQDDT"
                        Style="{StaticResource MaterialDesignTabRadioButton}"
                        GroupName="TabIndex"
                        Content="PHÊ DUYỆT DỰ ÁN" />
                    <RadioButton
                        x:Name="RbTKTC"
                        Style="{StaticResource MaterialDesignTabRadioButton}"
                        GroupName="TabIndex"
                        Content="TKTC VÀ TỔNG DỰ TOÁN" />
                </StackPanel>
            </Grid>
            <Grid
                Grid.Row="2" 
                Visibility="{Binding IsChecked, ElementName=RbDuAn, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" >
                    <Grid Margin="0 8">
                        <Grid.Resources>
                            <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignTextBox}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True"/>
                            </Style>
                            <Style TargetType="DatePicker" BasedOn="{StaticResource MaterialDesignFloatingHintDatePicker}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                            </Style>
                            <Style TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignFloatingHintComboBox}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" MinWidth="310"/>
                                <ColumnDefinition Width="*" MinWidth="310"/>
                                <ColumnDefinition Width="*" MinWidth="310"/>
                                <ColumnDefinition Width="3*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <!--<TextBlock FontWeight="SemiBold" Grid.ColumnSpan="6" Grid.Row="0">THÔNG TIN DỰ ÁN</TextBlock>-->

                            <TextBox 
                                materialDesign:HintAssist.Hint="Đơn vị"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="1"
                                Grid.Column="0"
                                Text="{Binding Model.TenDonVi}"
                                IsReadOnly="True"/>
                            <TextBox
                                materialDesign:HintAssist.Hint="Tên dự án"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="2"
                                Grid.Row="1"
                                Grid.Column="1"
                                Text="{Binding Model.STenDuAn}"
                                IsReadOnly="True"/>
                            <TextBox 
                                materialDesign:HintAssist.Hint="Mã dự án"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="2"
                                Grid.Column="0"
                                IsReadOnly="True"
                                Text="{Binding Model.SMaDuAn}"/>
                            <TextBox 
                                materialDesign:HintAssist.Hint="Chủ đầu tư"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="2"
                                Grid.Column="1"
                                IsReadOnly="True"
                                Text="{Binding Model.TenChuDauTu}"/>

                            <TextBox 
                                materialDesign:HintAssist.Hint="Hình thức quản lý dự án"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="2"
                                Grid.Column="2"
                                IsReadOnly="True"
                                Text="{Binding Model.TenHinhThucQL}"/>

                            <TextBox 
                                materialDesign:HintAssist.Hint="Ban quản lý dự án"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="3"
                                IsReadOnly="True"
                                Grid.Column="0"
                                Text="{Binding Model.SBanQuanLyDuAn}"/>

                            <TextBox 
                                materialDesign:HintAssist.Hint="Phân cấp phê duyệt"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="3"
                                Grid.Column="1"
                                IsReadOnly="True"
                                Text="{Binding Model.TenCapPheDuyet}"/>

                            <TextBox 
                                materialDesign:HintAssist.Hint="Nhóm"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="3"
                                Grid.Column="2"
                                IsReadOnly="True"
                                Text="{Binding Model.TenNhomDuAn}"/>


                            <Grid 
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="2"
                                Grid.Row="4"
                                Grid.Column="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Margin="0 0 10 0" materialDesign:HintAssist.Hint="Thời gian khởi công"
                                    Text="{Binding Model.SKhoiCong}"
                                    IsReadOnly="True"/>
                                <TextBox Grid.Column="2" Margin="10 0 0 0" materialDesign:HintAssist.Hint="Thời gian hoàn thành"
                                    Text="{Binding Model.SKetThuc}"
                                    IsReadOnly="True"/>
                            </Grid>

                            
                            <TextBox 
                                materialDesign:HintAssist.Hint="Hạn mức đầu tư"
                                Margin="0 10 10 10"
                                Grid.ColumnSpan="1"
                                Grid.Row="4"
                                Grid.Column="0"
                                IsReadOnly="True"
                                Text="{Binding Model.FHanMucDauTu,StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"/>

                            <TextBox
                                Grid.ColumnSpan="3"
                                Grid.Row="5"
                                Grid.Column="0"
                                Margin="0 10 10 10"
                                TextWrapping="Wrap"
                                VerticalAlignment="Stretch"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"
                                Height="80"
                                materialDesign:HintAssist.Hint="Địa điểm thực hiện"
                                Text="{Binding Model.SDiaDiem}"
                                IsReadOnly="True"/>

                            <TextBox
                                Grid.ColumnSpan="3"
                                Grid.Row="6"
                                Grid.Column="0"
                                Margin="0 10 10 10"
                                TextWrapping="Wrap"
                                VerticalAlignment="Stretch"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"
                                materialDesign:HintAssist.Hint="Mục tiêu đầu tư"
                                Height="80"
                                Text="{Binding Model.SMucTieu}"
                                IsReadOnly="True"/>

                            <TextBox 
                                Grid.ColumnSpan="3"
                                Grid.Row="7"
                                Grid.Column="0"
                                Margin="0 10 10 10"
                                TextWrapping="Wrap"
                                VerticalAlignment="Stretch"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"
                                Height="80"
                                materialDesign:HintAssist.Hint="Nội dung, quy mô đầu tư"
                                Text="{Binding Model.SQuyMo}"
                                IsReadOnly="True"/>

                            <component:AttachmentForm
                                
                                Grid.Row="8"
                                Grid.ColumnSpan="3"
                                Margin="4 20 4 10" />
                        </Grid>

                        <StackPanel Grid.Column="1"  Margin="0 0 0 0">
                            <StackPanel Grid.Row="0">
                                <TextBlock FontWeight="SemiBold">THÔNG TIN NGUỒN VỐN</TextBlock>
                                <DataGrid
                                    MaxHeight="300"
                                    x:Name="dgdDataNguonVonProjectDetail"
                                    BorderThickness="1"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    GridLinesVisibility="All"
                                    HorizontalScrollBarVisibility="Auto"
                                    ItemsSource="{Binding NguonVonItems}">

                                    <DataGrid.Style>
                                        <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                    </DataGrid.Style>
                                    <DataGrid.CellStyle>
                                        <StaticResource ResourceKey="DataGridCellDetail"/>
                                    </DataGrid.CellStyle>
                                    <DataGrid.RowStyle>
                                        <StaticResource ResourceKey="DataGridRowDetail"/>
                                    </DataGrid.RowStyle>
                                    <DataGrid.Columns>
                                        <DataGridTextColumn
                                            Width="600"
                                            Header="Nguồn vốn"
                                            Binding="{Binding TenNguonVon}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <DataGridTextColumn
                                            Width="350"
                                            Header="Giá trị phê duyệt"
                                            Binding="{Binding FThanhTien, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </StackPanel>

                            <StackPanel Grid.Row="3" Margin="0 10 0 0">
                                <TextBlock FontWeight="SemiBold">THÔNG TIN HẠNG MỤC</TextBlock>

                                <DataGrid
                                    x:Name="dgdDataHangMucProjectDetail"
                                    BorderThickness="1"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    GridLinesVisibility="All"
                                    MaxHeight="500"
                                    HorizontalScrollBarVisibility="Auto"
                                    ItemsSource="{Binding HangMucItems}">
                                    <DataGrid.Resources>
                                        <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {ComponentResourceKey ResourceId=MaterialDataGridComboBoxColumnEditingStyle, TypeInTargetAssembly={x:Type ComboBox}}}" />
                                    </DataGrid.Resources>
                                    <DataGrid.Style>
                                        <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                    </DataGrid.Style>
                                    <DataGrid.CellStyle>
                                        <StaticResource ResourceKey="DataGridCellDetail"/>
                                    </DataGrid.CellStyle>
                                    <DataGrid.RowStyle>
                                        <StaticResource ResourceKey="DataGridRowDetail"/>
                                    </DataGrid.RowStyle>
                                    <DataGrid.Columns>
                                        <DataGridTextColumn 
                                            x:Name="STTDA"
                                            Width="100"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="STT" 
                                            Binding="{Binding MaOrDer, UpdateSourceTrigger=LostFocus}"
                                            IsReadOnly="True"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>
                                        <DataGridTextColumn 
                                            x:Name="TenHangMuc"
                                            Width="400"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Tên Hạng mục" 
                                            Binding="{Binding STenHangMuc , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <DataGridTextColumn 
                                            x:Name="TenLoaiCT"
                                            Width="300"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Loại công trình" 
                                            Binding="{Binding TenLoaiCongTrinh , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <component:DataGridTextColumn
                                            Width="150"
                                            Header="Hạn mức đầu tư"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding HanMucDT, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                    </DataGrid.Columns>
                                </DataGrid>

                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
                <!--<Separator Background="{DynamicResource MaterialDesignDivider}"/>-->
            </Grid>
            <Grid
                Grid.Row="2" 
                Visibility="{Binding IsChecked, ElementName=RbChuTruong, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" >
                    <Grid Margin="0 8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Column="0">
                            <StackPanel.Resources>
                                <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignTextBox}">
                                    <Setter Property="Width" Value="200" />
                                    <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                    <Setter Property="Margin" Value="0 2 10 2" />
                                    <Setter Property="HorizontalAlignment" Value="Left" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                                <Style TargetType="DatePicker" BasedOn="{StaticResource MaterialDesignFloatingHintDatePicker}">
                                    <Setter Property="Width" Value="200" />
                                    <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                    <Setter Property="Margin" Value="0 2 10 2" />
                                    <Setter Property="HorizontalAlignment" Value="Left" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                                <Style TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignFloatingHintComboBox}">
                                    <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                    <Setter Property="Margin" Value="0 2 10 2" />
                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                            </StackPanel.Resources>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold">THÔNG TIN PHÊ DUYỆT</TextBlock>
                                <StackPanel Margin="0 10 10 0" Orientation="Horizontal">
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Số quyết định" 
                                        Text="{Binding CTDauTu.SSoQuyetDinh}"
                                        IsReadOnly="True"/>
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Ngày quyết định" 
                                        Text="{Binding CTDauTu.DNgayQuyetDinh, Converter={StaticResource DateTimeToStringConverter}}"
                                        IsReadOnly="True"/>
                                    
                                </StackPanel>
                                <StackPanel Margin="0 10 10 0" Orientation="Horizontal">
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Chủ đầu tư" 
                                        Text="{Binding CTDauTu.TenChuDauTu}"
                                        IsReadOnly="True"/>
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Phân cấp phê duyệt" 
                                        Text="{Binding CTDauTu.TenCapPheDuyet}"
                                        IsReadOnly="True"/>
                                </StackPanel>
                                <StackPanel Margin="0 10 10 0" Orientation="Horizontal">
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Thời gian khởi công" 
                                        Text="{Binding CTDauTu.SKhoiCong}"
                                        IsReadOnly="True"/>
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Thời gian hoàn thành" 
                                        Text="{Binding CTDauTu.SHoanThanh}"
                                        IsReadOnly="True"/>
                                </StackPanel>
                                <StackPanel Margin="0 10 10 0" Orientation="Horizontal">
                                    <TextBox
                                        Width="350px"
                                        materialDesign:HintAssist.Hint="Tổng mức đầu tư" 
                                        Text="{Binding CTDauTu.FTmdtduKienPheDuyet, StringFormat={}{0:N0}}"
                                        IsReadOnly="True"/>
                                    
                                </StackPanel>
                            </StackPanel>
                            
                        </StackPanel>
                        <StackPanel Grid.Row="0" Grid.Column="1">
                            <Grid Margin="0 0 0 10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0">
                                    <TextBlock FontWeight="SemiBold" Margin="0 10 0 0">DANH SÁCH PHÊ DUYỆT CHỦ TRƯƠNG ĐẦU TƯ</TextBlock>
                                </StackPanel>
                                <component:ExpandedDataGrid 
                                Margin="0 5 0 0"
                                Grid.Row="1"
                                x:Name="dgdDataChuTruongDauTu"
                                BorderThickness="1"
                                CanUserResizeColumns="True"
                                VerticalAlignment="Top"
                                CanUserAddRows="False"
                                MaxHeight="300"
                                AutoGenerateColumns="False"
                                ext:DataGridBehavior.LastColumnFill="True"
                                GridLinesVisibility="All"
                                HorizontalScrollBarVisibility="Auto"
                                ItemsSource="{Binding ChuTruongDauTuItems}"
                                Style="{StaticResource MaterialDesignDataGrid}"
                                CellStyle="{StaticResource DataGridCellDetail}"
                                RowStyle="{StaticResource DataGridRowIndex}">
                                    <DataGrid.Columns>
                                        <materialDesign:DataGridTextColumn
                                        Width="150"
                                        x:Name="SoQdCTDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Số quyết định" 
                                        Binding="{Binding SSoQuyetDinh, UpdateSourceTrigger=LostFocus}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn 
                                        Width="150"
                                        x:Name="NgayQdCTDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnCenterStyle}"
                                        Header="Ngày quyết định" 
                                        Binding="{Binding DNgayQuyetDinh, Converter={StaticResource DateTimeToStringConverter}}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn
                                        Width="400"
                                        x:Name="TenDuAnCTDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Dự án" 
                                        Binding="{Binding STenDuAn , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn
                                        Width="260"
                                        Header="Giá trị phê duyệt"
                                        Binding="{Binding FTmdtduKienPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn 
                                        Width="200"
                                        x:Name="TenLoaiCTDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Loại" 
                                        Binding="{Binding Loai , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                    </DataGrid.Columns>
                                </component:ExpandedDataGrid>
                            </Grid>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold">THÔNG TIN NGUỒN VỐN</TextBlock>
                                <Grid>
                                    <DataGrid
                                        MaxHeight="300"
                                        x:Name="dgdDataNguonVonChuTruong"
                                        BorderThickness="1"
                                        CanUserResizeColumns="True"
                                        CanUserAddRows="False"
                                        AutoGenerateColumns="False"
                                        GridLinesVisibility="All"
                                        HorizontalScrollBarVisibility="Auto"
                                        ItemsSource="{Binding ChuTruongNguonVonItems}">
                                        <DataGrid.Style>
                                            <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                        </DataGrid.Style>
                                        <DataGrid.CellStyle>
                                            <StaticResource ResourceKey="DataGridCellDetail"/>
                                        </DataGrid.CellStyle>
                                        <DataGrid.RowStyle>
                                            <StaticResource ResourceKey="DataGridRowDetail"/>
                                        </DataGrid.RowStyle>
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Header="Nguồn vốn"
                                                Width="300"
                                                Binding="{Binding TenNguonVon}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <DataGridTextColumn
                                                Width="856"
                                                Header="Giá trị phê duyệt"
                                                Binding="{Binding FTienPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}, UpdateSourceTrigger=LostFocus}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                </Grid>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold" Margin="0 10 0 0">THÔNG TIN HẠNG MỤC</TextBlock>
                                
                                <DataGrid
                                    x:Name="dgdDataHangMucChuTruong"
                                    BorderThickness="1"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    GridLinesVisibility="All"
                                    HorizontalScrollBarVisibility="Auto"
                                    MaxHeight="400"
                                    ItemsSource="{Binding ChuTruongHangMucItems}">
                                    <DataGrid.Resources>
                                        <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {ComponentResourceKey ResourceId=MaterialDataGridComboBoxColumnEditingStyle, TypeInTargetAssembly={x:Type ComboBox}}}" />
                                    </DataGrid.Resources>
                                    <DataGrid.Style>
                                        <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                    </DataGrid.Style>
                                    <DataGrid.CellStyle>
                                        <StaticResource ResourceKey="DataGridCellDetail"/>
                                    </DataGrid.CellStyle>
                                    <DataGrid.RowStyle>
                                        <StaticResource ResourceKey="DataGridRowDetail"/>
                                    </DataGrid.RowStyle>
                                    <DataGrid.Columns>
                                        <DataGridTextColumn 
                                            x:Name="STT"
                                            Width="100"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="STT" 
                                            Binding="{Binding MaOrDer, UpdateSourceTrigger=LostFocus}"
                                            IsReadOnly="True"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>
                                        <DataGridTextColumn 
                                            x:Name="TenHangMucCT"
                                            Width="600"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Tên Hạng mục" 
                                            Binding="{Binding STenHangMuc , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <DataGridTextColumn 
                                            x:Name="TenLoaiCTChuTruong"
                                            Width="456"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Loại công trình" 
                                            Binding="{Binding TenLoaiCongTrinh , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <!--<component:DataGridTextColumn
                                            Width="150"
                                            Header="Hạn mức đầu tư"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding HanMucDT, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>-->
                                    </DataGrid.Columns>
                                </DataGrid>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
                <!--<Separator Background="{DynamicResource MaterialDesignDivider}"/>-->
            </Grid>

            <Grid Grid.Row="2" 
                Visibility="{Binding IsChecked, ElementName=RbQDDT, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Grid.Row="1">
                    <Grid Margin="0 8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0">
                                <TextBlock FontWeight="SemiBold" Margin="0 10 0 0">DANH SÁCH QUYẾT ĐỊNH PHÊ DUYỆT DỰ ÁN</TextBlock>
                            </StackPanel>
                            <component:ExpandedDataGrid 
                                Margin="0 5 0 0"
                                Grid.Row="1"
                                MaxHeight="300"
                                x:Name="dgdDataQDDauTuDetail"
                                BorderThickness="1"
                                CanUserResizeColumns="True"
                                VerticalAlignment="Top"
                                CanUserAddRows="False"
                                AutoGenerateColumns="False"
                                ext:DataGridBehavior.LastColumnFill="True"
                                GridLinesVisibility="All"
                                HorizontalScrollBarVisibility="Auto"
                                SelectedItem="{Binding SelectedQDDauTu, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                ItemsSource="{Binding QDDauTuItems}"
                                Style="{StaticResource MaterialDesignDataGrid}"
                                CellStyle="{StaticResource DataGridCellDetail}"
                                RowStyle="{StaticResource DataGridRowIndex}"
                                ext:SelectionMouseDoubleClickBehaviour.Command="{Binding ShowNguonVonChiPhiQDCommand}">
                                <DataGrid.Columns>
                                    <materialDesign:DataGridTextColumn
                                        Width="150"
                                        x:Name="SoQdDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Số quyết định" 
                                        Binding="{Binding SSoQuyetDinh, UpdateSourceTrigger=LostFocus}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn 
                                        Width="150"
                                        x:Name="NgayQdDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnCenterStyle}"
                                        Header="Ngày quyết định" 
                                        Binding="{Binding DNgayQuyetDinh, Converter={StaticResource DateTimeToStringConverter}}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn
                                        Width="200"
                                        x:Name="TenDuAnQDDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Dự án" 
                                        Binding="{Binding STenDuAn , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn
                                        Width="200"
                                        Header="Giá trị phê duyệt"
                                        Binding="{Binding FTongMucDauTuPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn 
                                        Width="200"
                                        x:Name="TenLoaiQDDauTu"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Loại" 
                                        Binding="{Binding Loai , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                </DataGrid.Columns>
                            </component:ExpandedDataGrid>
                        </Grid>

                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" >
                                    <TextBlock FontWeight="SemiBold" Margin="0 10 0 0">THÔNG TIN NGUỒN VỐN</TextBlock>
                                    <DataGrid
                                        x:Name="dgdDataNguonVonDetail"
                                        MaxHeight="350px"
                                        Margin="0 5 0 0"
                                        ScrollViewer.CanContentScroll="True"
                                        FrozenColumnCount="1"
                                        AutoGenerateColumns="False"
                                        VerticalAlignment="Top"
                                        CanUserResizeColumns="True"
                                        BorderThickness="1"
                                        HorizontalScrollBarVisibility="Auto"
                                        CanUserAddRows="False"
                                        GridLinesVisibility="All"
                                        Style="{StaticResource MaterialDesignDataGrid}"
                                        CellStyle="{StaticResource DataGridCellDetail}"
                                        RowStyle="{StaticResource DataGridRowDetail}"
                                        SelectedItem="{Binding SelectedNguonVon}"
                                        ItemsSource="{Binding QDDauTuNguonVonItems}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Width="400"
                                                Header="Nguồn vốn"
                                                Binding="{Binding TenNguonVon}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <component:DataGridTextColumn
                                                x:Name="GiaTriNguonVon"
                                                Header="Giá trị phê duyệt"
                                                StringFormat="{}{0:N0}"
                                                Width="500"
                                                Binding="{Binding GiaTriPheDuyet, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                                <StackPanel Grid.Row="1">
                                    <TextBlock Margin="0 10 0 0" FontWeight="SemiBold">THÔNG TIN CHI PHÍ</TextBlock>
                                    <DataGrid
                                        x:Name="dgdDataChiPhiDetail"
                                        MaxHeight="450px"
                                        Margin="0 5 0 0"
                                        VerticalAlignment="Top"
                                        BorderThickness="1"
                                        CanUserResizeColumns="True"
                                        CanUserAddRows="False"
                                        AutoGenerateColumns="False"
                                        GridLinesVisibility="All"
                                        HorizontalScrollBarVisibility="Auto"
                                        Style="{StaticResource MaterialDesignDataGrid}"
                                        CellStyle="{StaticResource DataGridCellDetail}"
                                        RowStyle="{StaticResource DataGridRowDetail}"
                                        SelectedItem="{Binding SelectedChiPhiQDDauTu}"
                                        ItemsSource="{Binding QDDauTuChiPhiItems}">
                                        <DataGrid.Resources>
                                            <Style TargetType="ComboBox" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type ComboBox}, ResourceId=MaterialDataGridComboBoxColumnEditingStyle}}" ></Style>
                                        </DataGrid.Resources>
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Header="Chi phí"
                                                Width="400"
                                                Binding="{Binding TenChiPhi, UpdateSourceTrigger=LostFocus}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <component:DataGridTextColumn
                                                Header="Giá trị phê duyệt"
                                                StringFormat="{}{0:N0}"
                                                MinWidth="300"
                                                Binding="{Binding GiaTriPheDuyet, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <DataGridTemplateColumn
                                                Width="200">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button 
                                                            Style="{StaticResource MaterialDesignFlatButton}" FontSize="12" Height="25"
                                                            Visibility="{Binding IsEditHangMuc, Converter={StaticResource BooleanToVisibilityConverter}}" 
                                                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.ShowHangMucQDDauTuCommand}"
                                                            IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.IsEdit}">Chi tiết hạng mục
                                                        </Button>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </Grid>
                             
                            <Grid Grid.Column="1" Margin="10 0 0 0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0">
                                    <TextBlock FontWeight="SemiBold" Margin="0 10 0 0">THÔNG TIN HẠNG MỤC</TextBlock>
                                </StackPanel>

                                <component:ExpandedDataGrid 
                                    Margin="0 5 0 0"
                                    ext:DataGridBehavior.LastColumnFill="True"
                                    Grid.Row="1"
                                    MaxHeight="850"
                                    x:Name="dgdDataHangMucQD"
                                    BorderThickness="1"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    GridLinesVisibility="All"
                                    HorizontalScrollBarVisibility="Auto"
                                    ItemsSource="{Binding QDDauTuHangMucItems}">
                                    <DataGrid.Resources>
                                            <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {ComponentResourceKey ResourceId=MaterialDataGridComboBoxColumnEditingStyle, TypeInTargetAssembly={x:Type ComboBox}}}" />
                                        </DataGrid.Resources>
                                        <DataGrid.Style>
                                            <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                        </DataGrid.Style>
                                        <DataGrid.CellStyle>
                                            <StaticResource ResourceKey="DataGridCellDetail"/>
                                        </DataGrid.CellStyle>
                                        <DataGrid.RowStyle>
                                            <StaticResource ResourceKey="DataGridRowDetail"/>
                                        </DataGrid.RowStyle>
                                        <DataGrid.Columns>
                                        <materialDesign:DataGridTextColumn 
                                            x:Name="STTQD"
                                            Width="100"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="STT" 
                                            Binding="{Binding MaOrDer, UpdateSourceTrigger=LostFocus}"
                                            IsReadOnly="True"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn 
                                            x:Name="TenHangMucQD"
                                            Width="450"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Tên Hạng mục" 
                                            Binding="{Binding TenHangMuc , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn 
                                        x:Name="TenLoaiCTQD"
                                        Width="280"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Loại công trình" 
                                        Binding="{Binding TenLoaiCT , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                        <materialDesign:DataGridTextColumn
                                        Width="Auto"
                                        Header="Giá trị phê duyệt"
                                        Binding="{Binding GiaTriPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                        </materialDesign:DataGridTextColumn>
                                    </DataGrid.Columns>
                                    </component:ExpandedDataGrid>

                                </Grid>
                        </Grid>
                            
                    </Grid>
                </ScrollViewer>
            </Grid>
<!--thiết kế thi công tab-->
            <Grid Grid.Row="2" 
                Visibility="{Binding IsChecked, ElementName=RbTKTC, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <Grid Margin="0 8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0">
                                <TextBlock FontWeight="SemiBold" Margin="0 10 0 5">DANH SÁCH PHÊ DUYỆT TKTC VÀ TỔNG DỰ TOÁN</TextBlock>
                            </StackPanel>
                            <component:ExpandedDataGrid 
                                Grid.Row="1"
                                x:Name="dgdDataDuToanDetail"
                                BorderThickness="1"
                                MaxHeight="300"
                                CanUserResizeColumns="True"
                                VerticalAlignment="Top"
                                CanUserAddRows="False"
                                AutoGenerateColumns="False"
                                ext:DataGridBehavior.LastColumnFill="True"
                                GridLinesVisibility="All"
                                HorizontalScrollBarVisibility="Auto"
                                SelectedItem="{Binding SelectedDuToan, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                ItemsSource="{Binding DuToanItems}"
                                Style="{StaticResource MaterialDesignDataGrid}"
                                CellStyle="{StaticResource DataGridCellDetail}"
                                RowStyle="{StaticResource DataGridRowIndex}"
                                ext:SelectionMouseDoubleClickBehaviour.Command="{Binding ShowNguonVonChiPhiDTCommand}">
                                <DataGrid.Columns>
                                    <materialDesign:DataGridTextColumn
                                        Width="200"
                                        x:Name="SoQdDuToan"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Số quyết định" 
                                        Binding="{Binding SSoQuyetDinh, UpdateSourceTrigger=LostFocus}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn 
                                        Width="130"
                                        x:Name="NgayQdDuToan"
                                        ElementStyle="{StaticResource DataGridTextColumnCenterStyle}"
                                        Header="Ngày quyết định" 
                                        Binding="{Binding DNgayQuyetDinh, Converter={StaticResource DateTimeToStringConverter}}"
                                        IsReadOnly="True"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn
                                        Width="Auto"
                                        x:Name="TenDuToan"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Dự án" 
                                        Binding="{Binding STenDuAn , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn 
                                        x:Name="TenLoaiDuToan"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Loại dự toán" 
                                        Binding="{Binding LoaiDuToan , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                    <materialDesign:DataGridTextColumn
                                        Width="Auto"
                                        Header="Giá trị dự toán"
                                        Binding="{Binding FTongDuToanPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                    </materialDesign:DataGridTextColumn>
                                <materialDesign:DataGridTextColumn 
                                        x:Name="TenLoaiDieuChinh"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                        Header="Loại" 
                                        Binding="{Binding Loai , UpdateSourceTrigger=LostFocus}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                        IsReadOnly="True">
                                </materialDesign:DataGridTextColumn>
                            </DataGrid.Columns>
                            </component:ExpandedDataGrid>
                        </Grid>
                        <Grid Grid.Row="1" Margin="0 10 0 0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <StackPanel >
                                    <TextBlock FontWeight="SemiBold">THÔNG TIN NGUỒN VỐN</TextBlock>
                                    <Grid>
                                        <component:ExpandedDataGrid 
                                            x:Name="dgdDataNguonVonTKTC"
                                            MaxHeight="350px"
                                            Width="Auto"
                                            Margin="0 5 0 0"
                                            ScrollViewer.CanContentScroll="True"
                                            FrozenColumnCount="1"
                                            AutoGenerateColumns="False"
                                            VerticalAlignment="Top"
                                            CanUserResizeColumns="True"
                                            BorderThickness="1"
                                            HorizontalScrollBarVisibility="Auto"
                                            CanUserAddRows="False"
                                            GridLinesVisibility="All"
                                            Style="{StaticResource MaterialDesignDataGrid}"
                                            CellStyle="{StaticResource DataGridCellDetail}"
                                            RowStyle="{StaticResource DataGridRowDetail}"
                                            SelectedItem="{Binding SelectedNguonVon}"
                                            ItemsSource="{Binding DuToanNguonVonItems}">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn
                                                    Width="400"
                                                    Header="Nguồn vốn"
                                                    Binding="{Binding TenNguonVon}"
                                                    ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                    IsReadOnly="True"/>
                                                <component:DataGridTextColumn
                                                    x:Name="GiaTriNguonVonTKTC"
                                                    Header="Giá trị phê duyệt"
                                                    StringFormat="{}{0:N0}"
                                                    Width="400"
                                                    Binding="{Binding GiaTriPheDuyet, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                    IsReadOnly="True"/>
                                            </DataGrid.Columns>
                                        </component:ExpandedDataGrid>
                                    </Grid>
                                </StackPanel>
                                <StackPanel>
                                    <TextBlock Margin="0 10 0 0" FontWeight="SemiBold">THÔNG TIN CHI PHÍ</TextBlock>
                                    <DataGrid
                                        x:Name="dgdDataChiPhiTKTC"
                                        MaxHeight="500px"
                                        Margin="0 5 0 0"
                                        VerticalAlignment="Top"
                                        BorderThickness="1"
                                        CanUserResizeColumns="True"
                                        CanUserAddRows="False"
                                        AutoGenerateColumns="False"
                                        GridLinesVisibility="All"
                                        HorizontalScrollBarVisibility="Auto"
                                        Style="{StaticResource MaterialDesignDataGrid}"
                                        CellStyle="{StaticResource DataGridCellDetail}"
                                        RowStyle="{StaticResource DataGridRowDetail}"
                                        SelectedItem="{Binding SelectedChiPhiDuToan}"
                                        ItemsSource="{Binding DuToanChiPhiItems}">
                                        <DataGrid.Resources>
                                            <Style TargetType="ComboBox" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type ComboBox}, ResourceId=MaterialDataGridComboBoxColumnEditingStyle}}" ></Style>
                                        </DataGrid.Resources>
                                        <DataGrid.Columns>
                                            <DataGridTextColumn
                                                Header="Chi phí"
                                                Width="400"
                                                Binding="{Binding TenChiPhi, UpdateSourceTrigger=LostFocus}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <component:DataGridTextColumn
                                                Header="Giá trị phê duyệt"
                                                StringFormat="{}{0:N0}"
                                                MinWidth="200"
                                                Binding="{Binding GiaTriPheDuyet, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                                IsReadOnly="True"/>
                                            <DataGridTemplateColumn
                                                Width="200">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button 
                                                            Style="{StaticResource MaterialDesignFlatButton}" FontSize="12" Height="25"
                                                            Visibility="{Binding IsEditHangMuc, Converter={StaticResource BooleanToVisibilityConverter}}" 
                                                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.ShowHangMucDuToanCommand}"
                                                            IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.IsEdit}">Chi tiết hạng mục
                                                        </Button>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="10 0 0 0">
                                <TextBlock FontWeight="SemiBold" Margin="0 5 0 0">THÔNG TIN HẠNG MỤC</TextBlock>
                                <component:ExpandedDataGrid 
                                    x:Name="dgdDataHangMucTKTC"
                                    BorderThickness="1"
                                    MaxHeight="850"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    GridLinesVisibility="All"
                                    ext:DataGridBehavior.LastColumnFill="True"
                                    HorizontalScrollBarVisibility="Auto"
                                    ItemsSource="{Binding DuToanHangMucItems}">
                                    <DataGrid.Resources>
                                        <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {ComponentResourceKey ResourceId=MaterialDataGridComboBoxColumnEditingStyle, TypeInTargetAssembly={x:Type ComboBox}}}" />
                                    </DataGrid.Resources>
                                    <DataGrid.Style>
                                        <StaticResource ResourceKey="MaterialDesignDataGrid"/>
                                    </DataGrid.Style>
                                    <DataGrid.CellStyle>
                                        <StaticResource ResourceKey="DataGridCellDetail"/>
                                    </DataGrid.CellStyle>
                                    <DataGrid.RowStyle>
                                        <StaticResource ResourceKey="DataGridRowDetail"/>
                                    </DataGrid.RowStyle>
                                    <DataGrid.Columns>
                                        <DataGridTextColumn 
                                            x:Name="STTTKTC"
                                            Width="100"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="STT" 
                                            Binding="{Binding MaOrDer, UpdateSourceTrigger=LostFocus}"
                                            IsReadOnly="True"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>
                                        <DataGridTextColumn 
                                            x:Name="TenHangMucTKTC"
                                            Width="350"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Tên Hạng mục" 
                                            Binding="{Binding TenHangMuc , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <DataGridTextColumn 
                                            x:Name="TenLoaiCTTKTC"
                                            Width="250"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                            Header="Loại công trình" 
                                            Binding="{Binding TenLoaiCT , UpdateSourceTrigger=LostFocus}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                        <component:DataGridTextColumn
                                            Header="Giá trị phê duyệt"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding GiaTriPheDuyet, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat=\{0:N0\}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                            IsReadOnly="True"/>
                                    </DataGrid.Columns>
                                </component:ExpandedDataGrid>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Grid>

    </Grid>
</Window>
