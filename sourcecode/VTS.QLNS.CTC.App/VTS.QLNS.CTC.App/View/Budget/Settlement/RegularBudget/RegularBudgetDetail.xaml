<Window x:Class="VTS.QLNS.CTC.App.View.Budget.Settlement.RegularBudget.RegularBudgetDetail"
        x:Name="RegularBudgetDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
        xmlns:localEnum="clr-namespace:VTS.QLNS.CTC.Utility.Enum;assembly=VTS.QLNS.CTC.Utility"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:component="clr-namespace:VTS.QLNS.CTC.App.Component"
        xmlns:ext="clr-namespace:VTS.QLNS.CTC.App.Extensions"
        xmlns:helper="clr-namespace:VTS.QLNS.CTC.App.Helper" 
        xmlns:regularbudget="clr-namespace:VTS.QLNS.CTC.App.ViewModel.Budget.Settlement.RegularBudget" 
        d:DataContext="{d:DesignInstance Type=regularbudget:RegularBudgetDetailViewModel}"
        mc:Ignorable="d"
        Style="{StaticResource MaterialDesignWindow}" 
        Title="Quản lý ngân sách - Cục tài chính"
        Height="768" Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Icon="/favicon.ico">
    <Window.InputBindings>
        <KeyBinding Key="F4" Command="{Binding DeleteCommand}" CommandParameter="{Binding ElementName=DgRegularBudgetDetail1, Path=.}"/>
        <KeyBinding Key="F10" Command="{Binding SaveDataCommand}" />
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}" />
    </Window.InputBindings>
    <materialDesign:DialogHost
        Identifier="RegularBudgetDetailDialog"
        DialogTheme="Inherit">
        <Grid Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel 
                Grid.Row="0"
                Orientation="Vertical">
                <DockPanel>
                    <materialDesign:PackIcon Kind="Dollar" Style="{StaticResource DialogScreenIconStyle}"/>
                    <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                        <TextBlock Text="CHỨNG TỪ CHI TIẾT" FontWeight="Bold"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal" Grid.Column="0">
                                <TextBlock>
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="Năm làm việc: {0} | Số: {1} - Ngày: {2} | {3}">
                                            <Binding Path="NamLamViec" />
                                            <Binding Path="Model.SSoChungTu" />
                                            <Binding Path="Model.DNgayChungTu" Converter="{StaticResource DateTimeToStringConverter}" />
                                            <Binding Path="Model.STenDonVi" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </DockPanel>
                <Separator Background="{DynamicResource MaterialDesignDivider}"/>
            </StackPanel>
            <StackPanel Grid.Row="1">
                <ScrollViewer
                    HorizontalScrollBarVisibility="Auto">
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Model.BKhoa, Converter={StaticResource InvertBooleanToVisibilityConverter}}">
                            <Button 
                                ext:Permission.Identifier="BUDGET_SETTLEMENT_REGULARBUDGET_DETAIL_BTN_DELETE"
                                Style="{StaticResource SearchBarBtnStyle}" 
                                IsEnabled="{Binding IsDelete}"
                                ToolTip="Xóa dữ liệu"
                                Command="{Binding DeleteCommand}" CommandParameter="{Binding ElementName=DgRegularBudgetDetail1, Path=.}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Delete" />
                                    <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Xóa (F4)"/>
                                </StackPanel>
                            </Button>
                            <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                            <Button 
                                ext:Permission.Identifier="BUDGET_SETTLEMENT_REGULARBUDGET_DETAIL_BTN_DELETE_ALL"
                                Style="{StaticResource SearchBarBtnStyle}" 
                                IsEnabled="{Binding IsDeleteAll}"
                                Command="{Binding DeleteAllCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="DeleteForever" />
                                    <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Xóa tất cả"/>
                                </StackPanel>
                            </Button>
                            <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                            <Button 
                                Style="{StaticResource SearchBarBtnStyle}" 
                                IsEnabled="{Binding IsSaveData}"
                                Command="{Binding SaveDataCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="ContentSave" />
                                    <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Lưu dữ liệu (F10)"/>
                                </StackPanel>
                            </Button>
                            <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                            <Button 
                                ext:Permission.Identifier="BUDGET_SETTLEMENT_REGULARBUDGET_DETAIL_BTN_EXPLAIN"
                                Style="{StaticResource SearchBarBtnStyle}" 
                                Command="{Binding ExplainCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="NoteText" />
                                    <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Giải thích"/>
                                    <materialDesign:PopupBox
                                        Margin="-10 0 0 0"
                                        Grid.Column="1" 
                                        HorizontalAlignment="Right"
                                        IsPopupOpen="{Binding IsOpenExplainPopup, Mode=TwoWay}">
                                        <materialDesign:PopupBox.ToggleContent>
                                            <materialDesign:PackIcon Kind="MenuDown" />
                                        </materialDesign:PopupBox.ToggleContent>
                                        <StackPanel>
                                            <Button Command="{Binding DataInterpretationCommand}" Content="Giải thích số liệu" />
                                            <Separator Style="{StaticResource MaterialDesignLightSeparator}" Background="Gray" Margin="20 0 20 0"/>
                                            <Button Command="{Binding VerbalExplanationCommand}" Content="Giải thích bằng lời" />
                                        </StackPanel>
                                    </materialDesign:PopupBox>
                                </StackPanel>
                            </Button>
                            <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        </StackPanel>
                        <Button 
                            ext:Permission.Identifier="BUDGET_SETTLEMENT_REGULARBUDGET_DETAIL_BTN_LOCK"
                            IsEnabled="{Binding IsSummaried, Converter={StaticResource InvertBooleanConverter}}"
                            Style="{StaticResource SearchBarBtnStyle}"
                            Command="{Binding LockUnLockCommand}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="{Binding Model.BKhoa, Converter={StaticResource InvertBooleanToLockIconConverter}}" />
                                <TextBlock
                                    Style="{StaticResource SearchBarBtnTextStyle}" 
                                    Text="{Binding Model.BKhoa, Converter={StaticResource InvertBooleanToLockStatusConverter}}"/>
                            </StackPanel>
                        </Button>
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <Button 
                            Style="{StaticResource SearchBarBtnStyle}"
                            ToolTip="Refresh"
                            Command="{Binding RefreshCommand}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Refresh" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Tải lại (F5)"/>
                            </StackPanel>
                        </Button>
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <Button 
                            ext:Permission.Identifier="BUDGET_SETTLEMENT_REGULARBUDGET_DETAIL_BTN_PRINT_REPORT"
                            Style="{StaticResource SearchBarBtnStyle}" 
                            Command="{Binding PrintCommand}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Printer" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="In báo cáo"/>
                                <materialDesign:PopupBox
                                    Margin="-10 0 0 0"
                                    Grid.Column="1" 
                                    HorizontalAlignment="Right"
                                    IsPopupOpen="{Binding IsOpenPrintPopup, Mode=TwoWay}">
                                    <materialDesign:PopupBox.ToggleContent>
                                        <materialDesign:PackIcon Kind="MenuDown" />
                                    </materialDesign:PopupBox.ToggleContent>
                                    <StackPanel>
                                        <Button Command="{Binding PrintActionCommand}" CommandParameter="{x:Static localEnum:SettlementPrintType.PRINT_COMMUNICATE_SETTLEMENT_LNS}" Content="In thông tri quyết toán - LNS" />
                                        <Separator Style="{StaticResource MaterialDesignLightSeparator}" Background="Gray" Margin="20 0 20 0"/>
                                        <Button Command="{Binding PrintActionCommand}" CommandParameter="{x:Static localEnum:SettlementPrintType.PRINT_REGULARLY_SETTLEMENT}" Content="Tổng hợp quý - Quyết toán thường xuyên" />
                                    </StackPanel>
                                </materialDesign:PopupBox>
                            </StackPanel>
                        </Button>
                        <StackPanel Orientation="Horizontal" Visibility="{Binding IsTongHop, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                            <ComboBox
                                materialDesign:HintAssist.Hint="-- Cách hiển thị dữ liệu --"
                                DisplayMemberPath="DisplayItem"
                                SelectedValuePath="ValueItem"
                                ItemsSource="{Binding TypeShowAgency}"
                                SelectedItem="{Binding SelectedTypeShowAgency, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource MaterialDesignFloatingHintComboBox}"/>
                        </StackPanel>
                        <Separator
                            Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <Button 
                            Style="{StaticResource SearchBarBtnStyle}" 
                            IsEnabled="{Binding IsGetDataLuong}"
                            Command="{Binding GetDataCommand}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Transfer"/>
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Lấy số liệu quyết toán lương"/>
                            </StackPanel>
                        </Button>
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <Button x:Name="btnShowCol" Style="{StaticResource SearchBarBtnStyle}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="PlusMinusVariant" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Ẩn/hiện cột" />
                                <materialDesign:PopupBox
                                    Margin="-10 0 0 0"
                                    Name="pbDynamicColumn"
                                    HorizontalAlignment="Right"
                                    StaysOpen="True">
                                    <materialDesign:PopupBox.ToggleContent>
                                        <materialDesign:PackIcon Kind="MenuDown"/>
                                    </materialDesign:PopupBox.ToggleContent>
                                </materialDesign:PopupBox>
                            </StackPanel>
                        </Button>
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <ComboBox
                            Name="cbFrozenColumn"
                            materialDesign:HintAssist.Hint="Cố định cột"
                            DisplayMemberPath="DisplayItem"
                            SelectedValuePath="ValueItem"
                            Style="{StaticResource MaterialDesignFloatingHintComboBox}"/>
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <Button 
                            Style="{StaticResource SearchBarBtnStyle}" 
                            Command="{Binding CloseCommand}"
                            CommandParameter="{Binding ElementName=RegularBudgetDetailWindow}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CloseOutline" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Đóng"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </ScrollViewer>
                <Separator Margin="0 5 0 0" Background="{DynamicResource MaterialDesignDivider}"/>
                <StackPanel Orientation="Horizontal">
                    <TextBox 
                        Margin="5 0" 
                        Width="100"
                        materialDesign:HintAssist.Hint="--LNS--" 
                        Text="{Binding DetailFilter.Lns}"
                        Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                        <TextBox.InputBindings>
                            <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                        </TextBox.InputBindings>
                    </TextBox>
                    <materialDesign:PopupBox
                        Margin="-10 10 0 0"
                        Grid.Column="1" 
                        HorizontalAlignment="Right"
                        IsPopupOpen="{Binding IsOpenLnsPopup, Mode=TwoWay}"
                        StaysOpen="True">
                        <materialDesign:PopupBox.ToggleContent>
                            <materialDesign:PackIcon Kind="MenuDown"/>
                        </materialDesign:PopupBox.ToggleContent>
                        <StackPanel Margin="10" Orientation="Vertical">
                            <TextBox 
                                materialDesign:HintAssist.Hint="Tìm kiếm"
                                Text="{Binding DetailFilter.Lns, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                            <DataGrid 
                                Margin="0 10 0 0"
                                VerticalAlignment="Top" 
                                AutoGenerateColumns="False" 
                                CanUserResizeColumns="True"
                                BorderThickness="1"
                                HorizontalScrollBarVisibility="Auto"
                                CanUserAddRows="False"
                                SelectedItem="{Binding SelectedBudgetCatalog}"
                                ItemsSource="{Binding BudgetCatalogItems}">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="LNS" Binding="{Binding Lns}" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Mô tả" Binding="{Binding MoTa}" IsReadOnly="True"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </materialDesign:PopupBox>
                    <Grid Width="{Binding ElementName=L, Path=ActualWidth}" Visibility="{Binding ElementName=L, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="4"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="L" 
                            Text="{Binding DetailFilter.L, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=K, Path=ActualWidth}" Visibility="{Binding ElementName=K, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="4"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="K" 
                            Text="{Binding DetailFilter.K, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=M, Path=ActualWidth}" Visibility="{Binding ElementName=M, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="4"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="M" 
                            Text="{Binding DetailFilter.M, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TM, Path=ActualWidth}" Visibility="{Binding ElementName=TM, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="4"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="TM" 
                            Text="{Binding DetailFilter.TM, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TTM, Path=ActualWidth}" Visibility="{Binding ElementName=TTM, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="TTM" 
                            Text="{Binding DetailFilter.TTM, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=NG, Path=ActualWidth}" Visibility="{Binding ElementName=NG, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            materialDesign:HintAssist.Hint="NG" 
                            Text="{Binding DetailFilter.NG, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TNG, Path=ActualWidth}" Visibility="{Binding ElementName=TNG, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2" 
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}" 
                            materialDesign:HintAssist.Hint="TNG"
                            Text="{Binding DetailFilter.TNG, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TNG1, Path=ActualWidth}" Visibility="{Binding ElementName=TNG1, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2" 
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}" 
                            materialDesign:HintAssist.Hint="TNG1"
                            Text="{Binding DetailFilter.TNG1, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TNG2, Path=ActualWidth}" Visibility="{Binding ElementName=TNG2, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2" 
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}" 
                            materialDesign:HintAssist.Hint="TNG2"
                            Text="{Binding DetailFilter.TNG2, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                    <Grid Width="{Binding ElementName=TNG3, Path=ActualWidth}" Visibility="{Binding ElementName=TNG3, Path=Visibility}">
                        <TextBox
                            Margin="5 0"
                            MaxLength="2" 
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}" 
                            materialDesign:HintAssist.Hint="TNG3"
                            Text="{Binding DetailFilter.TNG3, UpdateSourceTrigger=PropertyChanged}">
                            <TextBox.InputBindings>
                                <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                            </TextBox.InputBindings>
                        </TextBox>
                    </Grid>
                                        
                    <Button Style="{StaticResource SearchBarBtnStyle}" Command="{Binding SearchCommand}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Search" />
                            <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Tìm kiếm"/>
                        </StackPanel>
                    </Button>
                    <Button 
                        Style="{StaticResource SearchBarBtnStyle}"
                        ToolTip="Filter"
                        Command="{Binding ResetSearchCommand}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="FilterRemoveOutline" />
                        </StackPanel>
                    </Button>
                    <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                    <ComboBox
                        materialDesign:HintAssist.Hint="-- Hiển thị --"
                        materialDesign:TextFieldAssist.HasClearButton="True"
                        DisplayMemberPath="DisplayItem"
                        SelectedValuePath="ValueItem"
                        SelectedItem="{Binding SelectedDisplayCondition}"
                        ItemsSource="{Binding DisplayConditions}"
                        Style="{StaticResource MaterialDesignFloatingHintComboBox}">
                    </ComboBox>
                    <StackPanel Orientation="Horizontal" Visibility="{Binding IsShowAgencyFilter, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                        <ComboBox
                            materialDesign:HintAssist.Hint="-- Đơn vị --"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            DisplayMemberPath="DisplayItem"
                            SelectedItem="{Binding SelectedAgency}"
                            ItemsSource="{Binding Agencies}"
                            Style="{StaticResource SearchBarHorizontalComboBoxStyle}" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>
            <Grid
                Grid.Row="2"
                Margin="0 5 0 0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <component:ExpandedDataGrid 
                    x:Name="DgRegularBudgetDetail1"
                    Grid.Row="1"
                    VerticalAlignment="Top"
                    AutoGenerateColumns="False"
                    CanUserResizeColumns="True"
                    FrozenColumnCount="9"
                    CanUserAddRows="False"
                    CanUserSortColumns="True"
                    CanUserDeleteRows="False"
                    CanUserReorderColumns="True"
                    GridLinesVisibility="All"
                    BorderThickness="1 1 1 1"
                    EnableFooterDataGrid="True"
                    EnableHeaderDataGrid="True"
                    RowStyle="{StaticResource DataGridRowDetail}"
                    CellStyle="{StaticResource DataGridCellDetail}"
                    Style="{StaticResource MaterialDesignDataGrid}"
                    ElementFrozenColumn="{Binding ElementName=cbFrozenColumn, Path=., Mode=TwoWay}"
                    ElementDynamicColumn="{Binding ElementName=pbDynamicColumn, Path=., Mode=TwoWay}"
                    SelectedItem="{Binding SelectedItem}"
                    ItemsSource="{Binding SettlementVoucherDetails}"
                    ScrollViewer.ScrollChanged="dgdData_ScrollChanged"
                    ext:DataGridBehavior.LastColumnFill="True">
                    <DataGrid.Resources>
                        <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                    </DataGrid.Resources>
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Số chứng từ">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <ToggleButton Visibility="{Binding IsChildSummary, Converter={StaticResource InvertBooleanToVisibilityHiddenConverter}}"
                                                      Template="{StaticResource SimpleExpanderButtonTemp}"
                                                      IsChecked="{Binding IsCollapse, UpdateSourceTrigger=PropertyChanged}" />
                                        <TextBlock Text="{Binding SSoChungTu}"></TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn x:Name="LNS" Header="LNS" Visibility="{Binding Data.ColumnDisplay.ColumnLNS, Source={StaticResource DataContextProxy}}" Binding="{Binding SLns}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}" Width="125"/>
                        <DataGridTextColumn x:Name="L" Header="L" Visibility="{Binding Data.ColumnDisplay.ColumnL, Source={StaticResource DataContextProxy}}" Binding="{Binding SL}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="K" Header="K" Visibility="{Binding Data.ColumnDisplay.ColumnK, Source={StaticResource DataContextProxy}}" Binding="{Binding SK}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="M" Header="M" Visibility="{Binding Data.ColumnDisplay.ColumnM, Source={StaticResource DataContextProxy}}" Binding="{Binding SM}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TM" Header="TM" Visibility="{Binding Data.ColumnDisplay.ColumnTM, Source={StaticResource DataContextProxy}}" Binding="{Binding STm}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TTM" Header="TTM" Visibility="{Binding Data.ColumnDisplay.ColumnTTM, Source={StaticResource DataContextProxy}}" Binding="{Binding STtm}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="NG" Header="NG" Visibility="{Binding Data.ColumnDisplay.ColumnNG, Source={StaticResource DataContextProxy}}" Binding="{Binding SNg}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TNG" Header="TNG" Visibility="{Binding Data.ColumnDisplay.ColumnTNG, Source={StaticResource DataContextProxy}}" Binding="{Binding STng}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TNG1" Header="TNG1" Visibility="{Binding Data.ColumnDisplay.ColumnTNG1, Source={StaticResource DataContextProxy}}" Binding="{Binding STng1}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TNG2" Header="TNG2" Visibility="{Binding Data.ColumnDisplay.ColumnTNG2, Source={StaticResource DataContextProxy}}" Binding="{Binding STng2}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn x:Name="TNG3" Header="TNG3" Visibility="{Binding Data.ColumnDisplay.ColumnTNG3, Source={StaticResource DataContextProxy}}" Binding="{Binding STng3}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn Width="250" x:Name="Description" Header="Mô tả" Binding="{Binding SMoTa}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn Width="200" x:Name="Level" Header="Đối tượng" Binding="{Binding SDoiTuong}" IsReadOnly="True" ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <DataGridTextColumn 
                            Visibility="{Binding Data.IsShowColumnDonVi, Source={StaticResource DataContextProxy}, Converter={StaticResource BooleanToVisibilityConverter}}"
                            x:Name="Agency"
                            Header="Đơn vị"
                            Binding="{Binding STenDonVi}"
                            IsReadOnly="True"
                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"/>
                        <component:DataGridTextColumn 
                            Total="{Binding Data.SettlementVoucherTotal.FTongDuToan, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            x:Name="Spend" 
                            Header="Dự toán" 
                            Binding="{Binding FDuToan, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}" 
                            IsReadOnly="True" 
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"/>
                        <component:DataGridTextColumn 
                            Total="{Binding Data.SettlementVoucherTotal.FTongDaQuyetToan, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            x:Name="Settled" 
                            Header="Đã quyết toán" 
                            Binding="{Binding FDaQuyetToan, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}" 
                            IsReadOnly="True" 
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"/>
                        <component:DataGridTextColumn 
                            Total="{Binding Data.SettlementVoucherTotal.FTongConLai, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            x:Name="Existence" 
                            Header="Còn lại" 
                            Binding="{Binding FConLai, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}" 
                            IsReadOnly="True" 
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"/>
                        <component:DataGridTextColumn
                            x:Name="TuChiDeNghi"
                            Header="Đề nghị"
                            Total="{Binding Data.SettlementVoucherTotal.FTongTuChiDeNghi, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            StringFormat="{}{0:N0}"
                            Binding="{Binding FTuChiDeNghi, Converter={ StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                            <DataGridColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Border
                                            Padding="{Binding RelativeSource={RelativeSource Self}, Path=(materialDesign:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                            <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                <Grid>
                                                    <Grid.Style>
                                                        <Style TargetType="Grid">
                                                            <Setter Property="Width">
                                                                <Setter.Value>
                                                                    <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                        <Binding ElementName="TuChiDeNghi" Path="ActualWidth"/>
                                                                        <Binding ElementName="TuChiPheDuyet" Path="ActualWidth"/>
                                                                    </MultiBinding>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </Grid.Style>
                                                    <TextBlock HorizontalAlignment="Center"
                                                               Name="canvas18"
                                                               Text= "Quyết toán - Tự chi" />
                                                </Grid>
                                            </Canvas>
                                        </Border>
                                        <Border
                                            Grid.Row="1"
                                            Padding="{Binding RelativeSource={RelativeSource Self}, Path=(materialDesign:DataGridAssist.ColumnHeaderPadding)}"
                                            BorderThickness="0 1 1 0"
                                            BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                            <TextBlock Name="HeaderGroup" Text="Đề nghị"/>
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </DataGridColumn.HeaderTemplate>
                        </component:DataGridTextColumn>
                        <component:DataGridTextColumn
                            x:Name="TuChiPheDuyet"
                            Header="Phê duyệt"
                            Total="{Binding Data.SettlementVoucherTotal.FTongTuChiPheDuyet, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            StringFormat="{}{0:N0}"
                            Binding="{Binding FTuChiPheDuyet, Converter={ StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}" 
                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                            HeaderTemplate="{StaticResource RightHeader}"/>
                        
                        <component:DataGridTextColumn
                            Total="{Binding Data.SettlementVoucherTotal.FTongSoNgay, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            x:Name="Day"
                            Header="Ngày"
                            StringFormat="{}{0:N0}"
                            Binding="{Binding FSoNgay, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"/>
                        <component:DataGridTextColumn
                            Total="{Binding Data.SettlementVoucherTotal.FTongSoNguoi, Source={StaticResource DataContextProxy}, Mode=TwoWay}"
                            x:Name="People"
                            Header="Người"
                            StringFormat="{}{0:N0}"
                            Binding="{Binding FSoNguoi, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"/>
                        <component:DataGridTextColumn
                            Total="{Binding Data.SettlementVoucherTotal.FTongSoLuot, Source={StaticResource DataContextProxy}}"
                            x:Name="Bout"
                            Header="Lượt"
                            StringFormat="{}{0:N0}"
                            Binding="{Binding FSoLuot, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"/>
                        <component:DataGridTextColumn 
                            x:Name="FDeNghiChuyenSangNamSau"
                            Header="Tổng dự toán chuyển năm sau" 
                            Binding="{Binding FDeNghiChuyenNamSau, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                            HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>
                        <component:DataGridTextColumn x:Name="DaCapTien"
                                                      Header="Đã cấp tiền"
                                                      StringFormat="{}{0:N0}"
                                                      Binding="{Binding FChuyenNamSauDaCap, Converter={ StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}}"
                                                      ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                      EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                                      HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                            <DataGridColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(materialDesign:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                            <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                <Grid>
                                                    <Grid.Style>
                                                        <Style TargetType="Grid">
                                                            <Setter Property="Width">
                                                                <Setter.Value>
                                                                    <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                        <Binding ElementName="DaCapTien"
                                                                                 Path="ActualWidth" />
                                                                        <Binding ElementName="ChuaCapTien"
                                                                                 Path="ActualWidth" />
                                                                    </MultiBinding>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </Grid.Style>
                                                    <TextBlock HorizontalAlignment="Center"
                                                               Name="canvas24"
                                                               Text="Trong đó:" />
                                                </Grid>
                                            </Canvas>
                                        </Border>
                                        <Border Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(materialDesign:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                            <TextBlock Name="HeaderGroup"
                                                       Text="Đã cấp tiền" />
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </DataGridColumn.HeaderTemplate>
                        </component:DataGridTextColumn>
                        <component:DataGridTextColumn x:Name="ChuaCapTien"
                                                      Header="Chưa cấp tiền"
                                                      StringFormat="{}{0:N0}"
                                                      IsReadOnly="True"
                                                      Binding="{Binding FChuyenNamSauChuaCap, Converter={ StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus, StringFormat={}{0:N0}}"
                                                      ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                                      EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                                      HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                                      HeaderTemplate="{StaticResource RightHeader}" />
                        <component:DataGridTextColumn x:Name="Mealprice"
                                                      Header="Mức tiền ăn (đồng/ngày)"
                                                      Binding="{Binding FTienAn, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                                      IsReadOnly="True"
                                                      ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}" />
                        <DataGridTextColumn 
                            x:Name="Note"
                            Header="Ghi chú"
                            Binding="{Binding SGhiChu, UpdateSourceTrigger=LostFocus}" 
                            ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                            EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>
                    </DataGrid.Columns>
                </component:ExpandedDataGrid>
                <ScrollViewer Grid.Row="3" x:Name="scrollFooter" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                    <StackPanel Orientation="Horizontal">
                        <Grid Width="{Binding ElementName=LNS, Path=ActualWidth}" Visibility="{Binding ElementName=LNS, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=L, Path=ActualWidth}" Visibility="{Binding ElementName=L, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=K, Path=ActualWidth}" Visibility="{Binding ElementName=K, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=M, Path=ActualWidth}" Visibility="{Binding ElementName=M, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TM, Path=ActualWidth}" Visibility="{Binding ElementName=TM, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TTM, Path=ActualWidth}" Visibility="{Binding ElementName=TTM, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=NG, Path=ActualWidth}" Visibility="{Binding ElementName=NG, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TNG, Path=ActualWidth}" Visibility="{Binding ElementName=TNG, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TNG1, Path=ActualWidth}" Visibility="{Binding ElementName=TNG1, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TNG2, Path=ActualWidth}" Visibility="{Binding ElementName=TNG2, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=TNG3, Path=ActualWidth}" Visibility="{Binding ElementName=TNG3, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=Description, Path=ActualWidth}" Visibility="{Binding ElementName=Description, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=Level, Path=ActualWidth}" Visibility="{Binding ElementName=Level, Path=Visibility}"></Grid>
                        <Grid Width="{Binding ElementName=Agency, Path=ActualWidth}" Visibility="{Binding ElementName=Agency, Path=Visibility}" />
                        
                        <Grid Width="{Binding ElementName=Spend, Path=ActualWidth}" Visibility="{Binding ElementName=Spend, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongDuToan, StringFormat={}{0:N0}}" Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=Settled, Path=ActualWidth}" Visibility="{Binding ElementName=Settled, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongDaQuyetToan, StringFormat={}{0:N0}}" Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=Existence, Path=ActualWidth}" Visibility="{Binding ElementName=TuChiPheDuyet, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongConLai, StringFormat={}{0:N0}}" Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=TuChiDeNghi,Path=ActualWidth}" Visibility="{Binding ElementName=TuChiDeNghi, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongTuChiDeNghi, StringFormat={}{0:N0}}" Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=TuChiPheDuyet,Path=ActualWidth}" Visibility="{Binding ElementName=TuChiPheDuyet, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongTuChiPheDuyet, StringFormat={}{0:N0}}" Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        
                        <Grid Width="{Binding ElementName=Day, Path=ActualWidth}"
                              Visibility="{Binding ElementName=Day, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongSoNgay, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=People,Path=ActualWidth}"
                              Visibility="{Binding ElementName=People, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongSoNguoi, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=Bout,Path=ActualWidth}"
                              Visibility="{Binding ElementName=Bout, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongSoLuot, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=FDeNghiChuyenSangNamSau,Path=ActualWidth}"
                              Visibility="{Binding ElementName=FDeNghiChuyenSangNamSau, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongDeNghiChuyenNamSau, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=DaCapTien,Path=ActualWidth}"
                              Visibility="{Binding ElementName=DaCapTien, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongChuyenNamSauDaCap, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=ChuaCapTien,Path=ActualWidth}"
                              Visibility="{Binding ElementName=ChuaCapTien, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongChuyenNamSauChuaCap, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=Mealprice,Path=ActualWidth}"
                              Visibility="{Binding ElementName=Mealprice, Path=Visibility}">
                            <TextBox Text="{Binding SettlementVoucherTotal.FTongTienAn, StringFormat={}{0:N0}}"
                                     Style="{StaticResource TextBoxTotalCell}"></TextBox>
                        </Grid>
                        <Grid Width="{Binding ElementName=Note, Path=ActualWidth}"
                              Visibility="{Binding ElementName=Note, Path=Visibility}" />
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </materialDesign:DialogHost>
</Window>
