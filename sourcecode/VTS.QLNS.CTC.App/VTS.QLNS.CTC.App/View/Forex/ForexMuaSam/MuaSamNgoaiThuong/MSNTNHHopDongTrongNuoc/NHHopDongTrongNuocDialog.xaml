<Window x:Class="VTS.QLNS.CTC.App.View.Forex.ForexMuaSam.MuaSamNgoaiThuong.MSNTNHHopDongTrongNuoc.NHHopDongTrongNuocDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        x:Name="MSNTHopDongTrongNuocDialog"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        xmlns:localEnum="clr-namespace:VTS.QLNS.CTC.Utility.Enum;assembly=VTS.QLNS.CTC.Utility"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
        xmlns:ext="clr-namespace:VTS.QLNS.CTC.App.Extensions"
        xmlns:helper="clr-namespace:VTS.QLNS.CTC.App.Helper"
        xmlns:component="clr-namespace:VTS.QLNS.CTC.App.Component"
        xmlns:custom="clr-namespace:VTS.QLNS.CTC.Custom;assembly=VTS.QLNS.CTC.Custom"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Style="{StaticResource MaterialDesignWindow}"
        Title="{Binding Title}">
    <Window.InputBindings>
        <KeyBinding Key="F3" Command="{Binding AddGoiThauCommand}" />
        <KeyBinding Key="F4" Command="{Binding DeleteGoiThauCommand}" />
    </Window.InputBindings>
    <materialDesign:DialogHost
        Identifier="QLDuAnDialog"
        DialogTheme="Inherit">
        <Grid>
            <Grid Margin="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel>
                    <DockPanel>
                        <materialDesign:PackIcon Kind="PlaylistPlus" Style="{StaticResource DialogScreenIconStyle}"/>
                        <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="10 0">
                            <TextBlock Text="{Binding Title}" FontWeight="Bold"></TextBlock>
                            <TextBlock Text="{Binding Description}"></TextBlock>
                        </StackPanel>
                    </DockPanel>
                    <Separator Background="{DynamicResource MaterialDesignDivider}"/>
                </StackPanel>
                <ScrollViewer Grid.Row="1" Margin="0 0" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Disabled">
                    <Grid >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*" MinWidth="200"/>
                            <ColumnDefinition Width="1*" MinWidth="200"/>
                            <ColumnDefinition Width="1*" MinWidth="200"/>
                            <ColumnDefinition Width="1*" MinWidth="200"/>
                            <ColumnDefinition Width="1*" MinWidth="200"/>
                            <!--<ColumnDefinition Width="1*" MinWidth="150"/>
                            <ColumnDefinition Width="1*" MinWidth="150"/>-->
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.Resources>
                            <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignTextBox}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                <Setter Property="Margin" Value="4 2 4 2" />
                                <Setter Property="HorizontalAlignment" Value="Stretch" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                            </Style>
                            <Style TargetType="DatePicker" BasedOn="{StaticResource MaterialDesignFloatingHintDatePicker}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                <Setter Property="Margin" Value="4 2 4 2" />
                                <Setter Property="HorizontalAlignment" Value="Stretch" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                            </Style>
                            <Style TargetType="custom:AutoCompleteComboBox" BasedOn="{StaticResource MaterialDesignFloatingHintComboBox}">
                                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                                <Setter Property="Margin" Value="4 2 4 2" />
                                <Setter Property="HorizontalAlignment" Value="Stretch" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                            </Style>
                        </Grid.Resources>
                        <TextBlock
                            Grid.Row="0"
                            Grid.ColumnSpan="2"
                            Margin="4 5 4 0"
                            FontWeight="SemiBold"
                            Text="THÔNG TIN HỢP ĐỒNG"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="1"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Đơn vị quản lý (*)"
                            DisplayMemberPath="TenDonViDisplay"
                            TextSearch.TextPath="TenDonViDisplay"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedDonVi}"
                            ItemsSource="{Binding ItemsDonVi}"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="1"
                            Grid.Column="1"
                            Grid.ColumnSpan="2"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource InvertBooleanToVisibilityConverter}}"
                            materialDesign:HintAssist.Hint="Chương trình"
                            DisplayMemberPath="STenNhiemVuChi"
                            TextSearch.TextPath="STenNhiemVuChi"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedChuongTrinh}"
                            ItemsSource="{Binding ItemsChuongTrinh}"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="1"
                            Grid.Column="2"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            materialDesign:HintAssist.Hint="Dự án (*)"
                            DisplayMemberPath="STenDuAn"
                            TextSearch.TextPath="STenDuAn"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedDuAn}"
                            ItemsSource="{Binding ItemsDuAn}"/>
                        <TextBox
                            Grid.Row="1"
                            Grid.Column="3"
                            materialDesign:HintAssist.Hint="Chủ đầu tư"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.TenChuDauTuDisplay}"/>
                        <TextBox
                            Grid.Row="1"
                            Grid.Column="4"
                            Grid.ColumnSpan="2"
                            materialDesign:HintAssist.Hint="Địa điểm thực hiện"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.SDiaDiem}"/>
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Tổng múc đầu tư phê duyệt (USD)"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.TongMucDauTuUsd,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="1"
                            materialDesign:HintAssist.Hint="Tổng mức đầu tư phê duyệt (VND)"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.TongMucDauTuVnd,StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"/>
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="2"
                            materialDesign:HintAssist.Hint="Tổng mức đầu tư phê duyệt (EUR)"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.TongMucDauTuEur,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="3"
                            Grid.ColumnSpan="3"
                            materialDesign:HintAssist.Hint="Tổng mức đầu tư phê duyệt (Ngoại tệ khác)"
                            Visibility="{Binding IsShowDuAn, Converter={StaticResource BooleanToVisibilityConverter}}"
                            IsReadOnly="True"
                            Text="{Binding SelectedDuAn.TongMucDauTuNgoaiTeKhac,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>
                        <!--<TextBlock
                            Grid.Row="6"
                            Grid.ColumnSpan="2"
                            Margin="4 20 4 0"
                            FontWeight="SemiBold"
                            Text="THÔNG TIN PHÊ DUYỆT"/>-->
                        <TextBox
                            Grid.Row="1"
                            Grid.Column="3"
                            materialDesign:HintAssist.Hint="Số hợp đồng (*)"
                            IsReadOnly="{Binding IsDetail}"
                            Text="{Binding Model.SSoHopDong}"/>
                        <DatePicker
                            Grid.Row="1"
                            Grid.Column="4"
                            materialDesign:HintAssist.Hint="Ngày kí hợp đồng"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedDate="{Binding Model.DNgayHopDong, Converter={StaticResource DateTimeToStringConverter}}"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="2"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Loại hợp đồng"
                            DisplayMemberPath="STenLoaiHopDong"
                            TextSearch.TextPath="STenLoaiHopDong"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedLoaiHopDong}"
                            ItemsSource="{Binding ItemsLoaiHopDong}"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="3"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Nhà thầu đại diện (*)"
                            DisplayMemberPath="STenNhaThau"
                            TextSearch.TextPath="STenNhaThau"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedNhaThau}"
                            ItemsSource="{Binding ItemsNhaThau}"/>
                        <DatePicker
                            Grid.Row="2"
                            Grid.Column="3"
                            materialDesign:HintAssist.Hint="Ngày khởi công dự kiến"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedDate="{Binding Model.DKhoiCongDuKien, Converter={StaticResource DateTimeToStringConverter}}"/>
                        <!--<DatePicker
                            Grid.Row="2"
                            Grid.Column="4"
                            materialDesign:HintAssist.Hint="Ngày kết thúc dự kiến"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedDate="{Binding Model.DKetThucDuKien,Converter={StaticResource DateTimeToStringConverter}}"/>-->
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="4"
                            materialDesign:HintAssist.Hint="Thời gian thực hiện"
                            IsReadOnly="{Binding IsDetail}"
                            Text="{Binding Model.IThoiGianThucHien}"/>
                        <TextBox
                            Grid.Row="2"
                            Grid.Column="1"
                            Grid.ColumnSpan="2"
                            materialDesign:HintAssist.Hint="Tên hợp đồng (*)"
                            IsReadOnly="{Binding IsDetail}"
                            Text="{Binding Model.STenHopDong}"/>

                        <TextBox
                            Grid.Row="3"
                            Grid.Column="2"
                            materialDesign:HintAssist.Hint="Hình thức hợp đồng"
                            IsReadOnly="{Binding IsDetail}"
                            Text="{Binding Model.SHinhThucHopDong}"/>
                        <custom:AutoCompleteComboBox
                            Grid.Row="3"
                            Grid.Column="3"
                            Margin="5"
                            DisplayMemberPath="STenTiGia"
                            TextSearch.TextPath="STenTiGia"
                            materialDesign:HintAssist.Hint="Tỉ giá"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                            SelectedItem="{Binding SelectedTiGia, UpdateSourceTrigger=PropertyChanged}"
                            ItemsSource="{Binding ItemsTiGia}" />
                        <Grid
                            Visibility="{Binding IsVisibleTiGiaNhap, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Grid.Row="3"
                            Grid.Column="4"
                            Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Column="0" Text="1 USD = " VerticalAlignment="Bottom"/>
                            <TextBox
                                Grid.Column="1"
                                PreviewTextInput="NumberValidationTextBox"
                                TextAlignment="Right"
                                IsReadOnly="{Binding IsDetail}"
                                Text="{Binding FTiGiaNhap, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, TargetNullValue={x:Static sys:String.Empty}, UpdateSourceTrigger=LostFocus}"/>
                            <TextBlock Grid.Column="2" Text=" VND" VerticalAlignment="Bottom"/>
                        </Grid>
                        <!--<TextBox
                            Grid.Row="13"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Giá trị hợp đồng (USD)"
                            IsEnabled="False"
                            Text="{Binding FGiaHopDongUsd,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>-->

                        <!--<TextBox
                            Grid.Row="13"
                            Grid.Column="1"
                            materialDesign:HintAssist.Hint="Giá trị hợp đồng (VND)"
                            IsEnabled="False"
                            Text="{Binding FGiaHopDongVnd,StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"/>

                        <TextBox
                            Grid.Row="14"
                            Grid.Column="0"
                            materialDesign:HintAssist.Hint="Giá trị hợp đồng (EUR)"
                            IsEnabled="False"
                            Text="{Binding FGiaHopDongEur,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>

                        <TextBox
                            Grid.Row="14"
                            Grid.Column="1"
                            materialDesign:HintAssist.Hint="Giá trị hợp đồng (Ngoại tệ khác)"
                            IsEnabled="False"
                            Text="{Binding FGiaHopDongNgoaiTeKhac,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"/>

                        <component:AttachmentForm
                            Grid.Row="15"
                            Grid.ColumnSpan="2"
                            Margin="4 20 4 0"/>-->

                        <StackPanel
                            Grid.Column="0"
                            Grid.Row="10"
                            Grid.ColumnSpan="6"
                            Margin="4 0 4 0">
                            <StackPanel>
                                <TextBlock Margin="0 5 0 0" FontWeight="SemiBold" Text="DANH SÁCH GÓI THẦU"></TextBlock>
                                <StackPanel Orientation="Horizontal" Margin="0 3 0 0">
                                    <Button
                                        IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                                        Style="{StaticResource SearchBarBtnStyle}"
                                        Command="{Binding AddGoiThauCommand}"
                                        ToolTip="Tạo mới">
                                        <StackPanel Orientation="Horizontal">
                                            <materialDesign:PackIcon Kind="Plus" />
                                            <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Tạo mới (F3)"/>
                                        </StackPanel>
                                    </Button>
                                    <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}" />
                                    <Button
                                        IsEnabled="{Binding IsDetail, Converter={StaticResource InvertBooleanConverter}}"
                                        Style="{StaticResource SearchBarBtnStyle}"
                                        Command="{Binding DeleteGoiThauCommand}"
                                        ToolTip="Xóa dữ liệu">
                                        <StackPanel Orientation="Horizontal">
                                            <materialDesign:PackIcon Kind="Delete" />
                                            <TextBlock Style="{StaticResource SearchBarBtnTextStyle}" Text="Xóa (F4)"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                        <DataGrid 
                            x:Name="dgdThongTinGoiThau"
                            Grid.Column="0"
                            Grid.Row="11"
                            Grid.ColumnSpan="6"
                            Margin="0 5 0 0"
                            FrozenColumnCount="1"
                            BorderThickness="1"
                            CanUserResizeColumns="True"
                            VerticalAlignment="Top"
                            HorizontalScrollBarVisibility="Auto"
                            CanUserAddRows="False"
                            IsSynchronizedWithCurrentItem="True"
                            GridLinesVisibility="All"
                            RowStyle="{StaticResource DataGridRowDetail}"
                            Style="{StaticResource MaterialDesignDataGrid}"
                            SelectedItem="{Binding SelectedGoiThau}"
                            ScrollViewer.CanContentScroll="True"
                            ItemsSource="{Binding ItemsGoiThau, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            AutoGenerateColumns="False">
                            <DataGrid.Resources>
                                <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridCheckBoxColumn
                                    Binding="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    ElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnStyle}"
                                    EditingElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnEditingStyle}">
                                    <DataGridCheckBoxColumn.Header>
                                        <Border Background="Transparent">
                                            <CheckBox IsChecked="{Binding Data.SelectAllGoiThauFilter, Source={StaticResource DataContextProxy}}" />
                                        </Border>
                                    </DataGridCheckBoxColumn.Header>
                                    <DataGridCheckBoxColumn.HeaderStyle>
                                        <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridCheckBoxColumn.HeaderStyle>
                                </DataGridCheckBoxColumn>
                                <materialDesign:DataGridTextColumn
                                    x:Name="TenGoiThau"
                                    Header="Tên gói thầu"
                                    Width="220"
                                    MinWidth="220"
                                    IsReadOnly="True"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailLeftStyle}"
                                    Binding="{Binding STenGoiThau}">
                                </materialDesign:DataGridTextColumn>
                                <materialDesign:DataGridTextColumn
                                    x:Name="ThoiGianThucHien"
                                    Header="Thời gian thực hiện"
                                    Width="100"
                                    MinWidth="100"
                                    IsReadOnly="True"
                                    ElementStyle="{StaticResource DataGridTextColumnCenterStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                    Binding="{Binding IThoiGianThucHien}">
                                </materialDesign:DataGridTextColumn>
                                <!--<DataGridTemplateColumn Header="Thanh toán bằng" MinWidth="80">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <DataTemplate.Resources>
                                                <Style TargetType="ComboBox" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type ComboBox}, ResourceId=MaterialDataGridComboBoxColumnEditingStyle}}" ></Style>
                                            </DataTemplate.Resources>
                                            <StackPanel >
                                                <ComboBox
                                                    DisplayMemberPath="DisplayItem"
                                                    SelectedValuePath="ValueItem"
                                                    SelectedValue="{Binding IIdDonViTienTeId, UpdateSourceTrigger=LostFocus}"
                                                    ItemsSource="{Binding Data.ItemsLoaiTienTe, Source={StaticResource DataContextProxy}}">
                                                </ComboBox>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>-->
                                <DataGridTemplateColumn Header="Nhà thầu" MinWidth="100" HeaderStyle="{StaticResource DataGridColumnHeaderCenter}">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <DataTemplate.Resources>
                                                <Style TargetType="ComboBox" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type ComboBox}, ResourceId=MaterialDataGridComboBoxColumnEditingStyle}}" ></Style>
                                            </DataTemplate.Resources>
                                            <StackPanel >
                                                <ComboBox
                                                    DisplayMemberPath="DisplayItem"
                                                    SelectedValuePath="ValueItem"
                                                    SelectedValue="{Binding IIdNhaThauId, UpdateSourceTrigger=LostFocus}"
                                                    ItemsSource="{Binding Data.ItemsNhaThauGoiThau, Source={StaticResource DataContextProxy}}">
                                                </ComboBox>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <component:DataGridTextColumn
                                    x:Name="FGiaTriGoiThauVnd"
                                    Header="VND"
                                    MinWidth="150"
                                    Width="150"
                                    StringFormat="{}{0:N0}"
                                    IsReadOnly="True"
                                    Binding="{Binding FGiaTriGoiThauVnd, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                    <DataGridColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Border
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                    <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                        <Grid>
                                                            <Grid.Style>
                                                                <Style TargetType="Grid">
                                                                    <Setter Property="Width">
                                                                        <Setter.Value>
                                                                            <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                <Binding ElementName="FGiaTriGoiThauVnd" Path="ActualWidth"/>
                                                                                <Binding ElementName="FGiaTriGoiThauUsd" Path="ActualWidth"/>
                                                                                <!--<Binding ElementName="FGiaTriGoiThauEur" Path="ActualWidth"/>
                                                                                <Binding ElementName="FGiaTriGoiThauNgoaiTeKhac" Path="ActualWidth"/>-->
                                                                            </MultiBinding>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </Grid.Style>
                                                            <TextBlock TextAlignment="Center" HorizontalAlignment="Center"  Text="Giá gói thầu"/>
                                                        </Grid>
                                                    </Canvas>
                                                </Border>
                                                <Border
                                                    Grid.Row="1"
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                    BorderThickness="0 1 1 0"
                                                    BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                    <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </DataGridColumn.HeaderTemplate>
                                </component:DataGridTextColumn>
                                <component:DataGridTextColumn
                                    x:Name="FGiaTriGoiThauUsd"
                                    Header="USD"
                                    MinWidth="130"
                                    Width="130"
                                    IsReadOnly="True"
                                    StringFormat="{}{0:N0}"
                                    Binding="{Binding FGiaTriGoiThauUsd, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderTemplate="{StaticResource RightHeader}"/>
                                <!--<component:DataGridTextColumn
                                    x:Name="FGiaTriGoiThauEur"
                                    Binding="{Binding FGiaTriGoiThauEur, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                    Header="EUR"
                                    MinWidth="75"
                                    IsReadOnly="True"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    StringFormat="{}{0:N0}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    HeaderTemplate="{StaticResource CenterHeader}"/>
                                <component:DataGridTextColumn
                                    x:Name="FGiaTriGoiThauNgoaiTeKhac"
                                    Binding="{Binding FGiaTriGoiThauNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}}"
                                    Header="Ngoại tệ khác"
                                    MinWidth="100"
                                    IsReadOnly="True"
                                    StringFormat="{}{0:N0}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    HeaderTemplate="{StaticResource RightHeader}"/>-->
                                <!--<component:DataGridTextColumn 
                                    x:Name="TrungThauUsd"
                                    Binding="{Binding FGiaTriUsd, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    Header="USD" 
                                    MinWidth="75"
                                    StringFormat="{}{0:N0}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                    <DataGridColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Border
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                    <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                        <Grid>
                                                            <Grid.Style>
                                                                <Style TargetType="Grid">
                                                                    <Setter Property="Width">
                                                                        <Setter.Value>
                                                                            <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                <Binding ElementName="TrungThauUsd" Path="ActualWidth"/>
                                                                                <Binding ElementName="TrungThauVnd" Path="ActualWidth"/>
                                                                                <Binding ElementName="TrungThauEur" Path="ActualWidth"/>
                                                                                <Binding ElementName="TrungThauKhac" Path="ActualWidth"/>
                                                                            </MultiBinding>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </Grid.Style>
                                                            <TextBlock HorizontalAlignment="Center" Text="Giá trị trúng thầu"/>
                                                        </Grid>
                                                    </Canvas>
                                                </Border>
                                                <Border
                                                    Grid.Row="1"
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                    BorderThickness="0 1 1 0"
                                                    BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                    <TextBlock Name="HeaderGroup" Text="{Binding}"/>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </DataGridColumn.HeaderTemplate>
                                </component:DataGridTextColumn>
                                <component:DataGridTextColumn 
                                    x:Name="TrungThauVnd"
                                    Binding="{Binding FGiaTriVnd, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}}" 
                                    Header="VND"
                                    MinWidth="100"
                                    StringFormat="{}{0:N0}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    HeaderTemplate="{StaticResource CenterHeader}"/>
                                <component:DataGridTextColumn 
                                    x:Name="TrungThauEur"
                                    Binding="{Binding FGiaTriEur, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    Header="EUR"
                                    MinWidth="75"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    StringFormat="{}{0:N0}"
                                    HeaderTemplate="{StaticResource CenterHeader}"/>
                                <component:DataGridTextColumn 
                                    x:Name="TrungThauKhac"
                                    Binding="{Binding FGiaTriNgoaiTeKhac, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    Header="Ngoại tệ khác"
                                    MinWidth="100"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    StringFormat="{}{0:N0}"
                                    HeaderTemplate="{StaticResource RightHeader}"/>-->
                                <component:DataGridTextColumn
                                    x:Name="HopDongVND"
                                    Header="VND"
                                    MinWidth="150"
                                    Width="150"
                                    StringFormat="{}{0:N0}"
                                    Binding="{Binding FGiaTriHopDong_Vnd, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                    <DataGridColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Border
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                    <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                        <Grid>
                                                            <Grid.Style>
                                                                <Style TargetType="Grid">
                                                                    <Setter Property="Width">
                                                                        <Setter.Value>
                                                                            <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                <Binding ElementName="HopDongVND" Path="ActualWidth"/>
                                                                                <Binding ElementName="HopDongUSD" Path="ActualWidth"/>
                                                                                <!--<Binding ElementName="HopDongEUR" Path="ActualWidth"/>
                                                                                <Binding ElementName="HopDongNgoaiTe" Path="ActualWidth"/>-->
                                                                            </MultiBinding>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </Grid.Style>
                                                            <TextBlock HorizontalAlignment="Center" Text="Giá trị hợp đồng"/>
                                                        </Grid>
                                                    </Canvas>
                                                </Border>
                                                <Border
                                                    Grid.Row="1"
                                                    Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                    BorderThickness="0 1 1 0"
                                                    BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                    <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                </Border>
                                            </Grid>
                                        </DataTemplate>
                                    </DataGridColumn.HeaderTemplate>
                                </component:DataGridTextColumn>
                                <component:DataGridTextColumn
                                    x:Name="HopDongUSD"
                                    Header="Quy đổi USD"
                                    MinWidth="130"
                                    Width="130"
                                    IsReadOnly="True"
                                    StringFormat="{}{0:N0}"
                                    Binding="{Binding FGiaTriHopDong_Usd, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderTemplate="{StaticResource RightHeader}"/>
                                <!--<component:DataGridTextColumn 
                                    x:Name="HopDongEUR"
                                    Binding="{Binding FGiaTriHopDong_Eur, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    Header="EUR"
                                    MinWidth="75"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    StringFormat="{}{0:N0}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    HeaderTemplate="{StaticResource CenterHeader}"/>
                                <component:DataGridTextColumn 
                                    x:Name="HopDongNgoaiTe"
                                    Binding="{Binding FGiaTriHopDong_NgoaiTeKhac, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" 
                                    Header="Ngoại tệ khác"
                                    MinWidth="100"
                                    StringFormat="{}{0:N0}"
                                    EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}" 
                                    ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                    HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                    HeaderTemplate="{StaticResource RightHeader}"/>-->
                                <DataGridTemplateColumn MinWidth="45">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button
                                                IsEnabled="{Binding IsDisable, Converter={StaticResource InvertBooleanConverter}}"
                                                Style="{StaticResource MaterialDesignFlatButton}" FontSize="12" Height="25"
                                                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}} , Path=DataContext.ShowDetailChiPhiCommand}">Chi tiết gói thầu</Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </ScrollViewer>
                <StackPanel Grid.Row="2">
                    <Separator Background="{DynamicResource MaterialDesignDivider}"/>
                    <StackPanel Orientation="Horizontal" Margin="0 10 0 0" HorizontalAlignment="Right">
                        <Button
                            Margin="5 0 0 0"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Visibility="{Binding IsDetail, Converter={StaticResource InvertBooleanToVisibilityConverter}}"
                            Command="{Binding SaveCommand}"
                            CommandParameter="{Binding ElementName=MSNTHopDongTrongNuocDialog}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ContentSave" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}">Lưu dữ liệu</TextBlock>
                            </StackPanel>
                        </Button>
                        <Button
                            Margin="5 0 0 0"
                            Command="{Binding CloseCommand}"
                            CommandParameter="{Binding ElementName=MSNTHopDongTrongNuocDialog}"
                            Style="{StaticResource MaterialDesignOutlinedButton}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CloseOutline" />
                                <TextBlock Style="{StaticResource SearchBarBtnTextStyle}">Đóng</TextBlock>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Grid>
            <component:ProgressDialog/>
        </Grid>
    </materialDesign:DialogHost>
</Window>

