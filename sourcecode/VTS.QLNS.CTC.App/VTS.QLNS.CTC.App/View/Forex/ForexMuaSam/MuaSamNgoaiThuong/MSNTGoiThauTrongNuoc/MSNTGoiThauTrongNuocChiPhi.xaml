<Window x:Class="VTS.QLNS.CTC.App.View.Forex.ForexMuaSam.MuaSamNgoaiThuong.MSNTGoiThauTrongNuoc.MSNTGoiThauTrongNuocChiPhi"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        x:Name="NHKeHoachLuaChonNhaThauDetailView"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
        xmlns:component="clr-namespace:VTS.QLNS.CTC.App.Component"
        xmlns:helper="clr-namespace:VTS.QLNS.CTC.App.Helper"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Style="{StaticResource MaterialDesignWindow}"
        Title="{Binding Title}" Height="450" Width="800">
    <Window.InputBindings>
        <KeyBinding Key="F10" Command="{Binding SaveDataCommand}"/>
    </Window.InputBindings>
    <materialDesign:DialogHost
        Identifier="KHLuaChonNhaThauDetail"
        DialogTheme="Inherit">
        <Grid Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <DockPanel Grid.Row="0" >
                <materialDesign:PackIcon Kind="PlaylistPlus" Style="{StaticResource DialogScreenIconStyle}"/>
                <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="10 0">
                    <StackPanel  Orientation="Horizontal">
                        <TextBlock  Text="{Binding Name}" FontWeight="Bold"></TextBlock>
                        <TextBlock Text="{Binding Description}"></TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontWeight="SemiBold" Text="{Binding Model.STenGoiThau}"></TextBlock>
                        <TextBlock FontWeight="SemiBold" > - Thời gian thực hiện(số ngày):</TextBlock>
                        <TextBlock FontWeight="SemiBold" Text="{Binding Model.IThoiGianThucHien}"></TextBlock>
                    </StackPanel>
                </StackPanel>
            </DockPanel>
            <ScrollViewer
                    Grid.Row="1"
                    VerticalScrollBarVisibility="Auto"
                    HorizontalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Vertical">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Grid.Column="0" >
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" Grid.Column="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="3*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" FontWeight="SemiBold" Margin="0 20 10 5">NGUỒN VỐN</TextBlock>
                                    <StackPanel Orientation="Horizontal" Grid.Row="0"  Grid.Column="1">
                                        <TextBox
                                    Width="200"
                                    materialDesign:HintAssist.Hint="{Binding TitleDuToanViewName}" 
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}" 
                                    IsReadOnly="True"
                                    ToolTip="{Binding SDuToanFilter}"
                                    Text="{Binding SDuToanFilter}">
                                        </TextBox>
                                        <materialDesign:PopupBox
                                    Margin="5 0 0 0"
                                    HorizontalAlignment="Right"
                                    IsPopupOpen="{Binding IsOpenNguonVonPopup, Mode=TwoWay}"
                                    StaysOpen="True">
                                            <materialDesign:PopupBox.ToggleContent>
                                                <materialDesign:PackIcon Kind="MenuDown"/>
                                            </materialDesign:PopupBox.ToggleContent>
                                            <StackPanel Margin="10" Orientation="Vertical">
                                                <DataGrid
                                            Width="250"
                                            VerticalAlignment="Top"
                                            BorderThickness="1"
                                            CanUserResizeColumns="True"
                                            CanUserAddRows="False"
                                            AutoGenerateColumns="False"
                                            ScrollViewer.CanContentScroll="True"
                                            GridLinesVisibility="All"
                                            HorizontalScrollBarVisibility="Auto"
                                            Style="{StaticResource MaterialDesignDataGrid}"
                                            CellStyle="{StaticResource DataGridCellDetail}"
                                            RowStyle="{StaticResource DataGridRowDetail}"
                                            ItemsSource="{Binding ItemNguonVon}"
                                            SelectedItem="{Binding SelectedNguonVon}">
                                                    <DataGrid.Resources>
                                                        <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                                                    </DataGrid.Resources>
                                                    <DataGrid.Columns>
                                                        <DataGridCheckBoxColumn
                                                    Binding="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnStyle}"
                                                    EditingElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnEditingStyle}">
                                                            <DataGridCheckBoxColumn.Header>
                                                                <Border Background="Transparent">
                                                                    <CheckBox IsChecked="{Binding Data.SelectAllDuToanFilter, Source={StaticResource DataContextProxy}}" />
                                                                </Border>
                                                            </DataGridCheckBoxColumn.Header>
                                                            <DataGridCheckBoxColumn.HeaderStyle>
                                                                <Style
                                                            TargetType="{x:Type DataGridColumnHeader}"
                                                            BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                                                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                                                </Style>
                                                            </DataGridCheckBoxColumn.HeaderStyle>
                                                        </DataGridCheckBoxColumn>
                                                        <DataGridTextColumn
                                                    Header="Số quyết định"
                                                    ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                                    Width="*"
                                                    Binding="{Binding STenNguonVon}"
                                                    IsReadOnly="True"/>
                                                    </DataGrid.Columns>
                                                </DataGrid>
                                            </StackPanel>
                                        </materialDesign:PopupBox>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Grid.Row="1" Grid.Column="0">
                                    <TextBlock Margin="0 10 0 0" FontWeight="SemiBold">TỔNG GIÁ TRỊ DỰ TOÁN PHÊ DUYỆT</TextBlock>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <!--<Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>-->
                                        <TextBox
                                        Grid.Row="0" Grid.Column="1"
                                    Margin="0 0 5 0"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    materialDesign:HintAssist.Hint="VND"
                                    Text="{Binding ObjSumNguonVon.FGiaTriVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                    IsReadOnly="True"
                                    VerticalAlignment="Center">
                                        </TextBox>
                                        <TextBox
                                        Grid.Row="0" Grid.Column="0"
                                    Margin="0 0 5 0"
                                    IsReadOnly="True"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    materialDesign:HintAssist.Hint="USD"
                                    Text="{Binding ObjSumNguonVon.FGiaTriUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                    VerticalAlignment="Center">
                                        </TextBox>

                                        <!--<TextBox
                                        Grid.Row="1" Grid.Column="0"
                                    Margin="0 0 5 0"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    materialDesign:HintAssist.Hint="EURO"
                                    Text="{Binding ObjSumNguonVon.FGiaTriEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                            IsReadOnly="True"
                                    VerticalAlignment="Center">
                                        </TextBox>
                                        <TextBox
                                        Grid.Row="1" Grid.Column="1"
                                    Margin="0 0 5 0"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    materialDesign:HintAssist.Hint="Ngoại tệ khác"
                                    Text="{Binding ObjSumNguonVon.FGiaTriNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter},  UpdateSourceTrigger=PropertyChanged}"
                                            IsReadOnly="True"
                                    VerticalAlignment="Center">
                                        </TextBox>-->
                                    </Grid>
                                </StackPanel>

                                <StackPanel Grid.Row="2" Grid.Column="0">
                                    <TextBlock Margin="0 10 0 0" FontWeight="SemiBold">TỔNG GIÁ TRỊ GÓI THẦU PHÊ DUYỆT</TextBlock>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <!--<Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>-->
                                        <TextBox
                                            Grid.Row="0" Grid.Column="1"
                                            Margin="0 0 5 0"
                                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                            materialDesign:HintAssist.Hint="VND"
                                            IsReadOnly="True"
                                            Text="{Binding ObjSumNguonVon.FGiaTriPheDuyetVND,StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                            VerticalAlignment="Center">
                                        </TextBox>
                                        <TextBox
                                            Grid.Row="0" Grid.Column="0"
                                            Margin="0 0 5 0"
                                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                            materialDesign:HintAssist.Hint="USD"
                                            IsReadOnly="True"
                                            Text="{Binding ObjSumNguonVon.FGiaTriPheDuyetUSD,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                            VerticalAlignment="Center">
                                        </TextBox>

                                        <!--<TextBox
                                            Grid.Row="1" Grid.Column="0"
                                            Margin="0 0 5 0"
                                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                            materialDesign:HintAssist.Hint="EURO"
                                            IsReadOnly="True"
                                            Text="{Binding ObjSumNguonVon.FGiaTriPheDuyetEUR,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                            VerticalAlignment="Center">
                                        </TextBox>
                                        <TextBox
                                            Grid.Row="1" Grid.Column="1"
                                            Margin="0 0 5 0"
                                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                            materialDesign:HintAssist.Hint="Ngoại tệ khác"
                                            IsReadOnly="True"
                                            Text="{Binding ObjSumNguonVon.FGiaTriPheDuyetNgoaiTeKhac,StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=PropertyChanged}"
                                            VerticalAlignment="Center">
                                        </TextBox>-->
                                    </Grid>
                                </StackPanel>
                                <StackPanel Grid.Row="2"  Grid.Column="0"  Orientation="Vertical" x:Name="Stack1">
                                    <DataGrid
                                    Visibility="Hidden"
                                    x:Name="dgdNHKeHoachLuaChonNhaThauNguonVon1Detail"
                                    Margin="0 5 0 0"
                                    MaxHeight="500px"
                                    VerticalAlignment="Top"
                                    BorderThickness="1"
                                    CanUserResizeColumns="True"
                                    CanUserAddRows="False"
                                    AutoGenerateColumns="False"
                                    ScrollViewer.CanContentScroll="True"
                                    GridLinesVisibility="All"
                                    HorizontalScrollBarVisibility="Auto"
                                    FrozenColumnCount="0"
                                    BeginningEdit="dgdNhDaKHLCNTNguonVonDetail_BeginningEdit"
                                    Width="{Binding ElementName=Stack1, Path=ActualWidth}"
                                    IsReadOnly="{Binding BIsShowDetail}"
                                    Style="{StaticResource MaterialDesignDataGrid}"
                                    CellStyle="{StaticResource DataGridCellDetail}"
                                    RowStyle="{StaticResource DataGridRowDetail}"
                                    SelectedItem="{Binding SelectedNguonVonView}"
                                    ItemsSource="{Binding ItemNguonVonView}">
                                        <DataGrid.Resources>
                                            <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                                        </DataGrid.Resources>
                                        <DataGrid.Columns>
                                            <component:DataGridTextColumn  
                                            x:Name="fGiaNguonVonVND"
                                            Header="VND"
                                            MinWidth="120"
                                            IsReadOnly="True"
                                            Width="*"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding FGiaTriVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                            >

                                                <DataGridColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition />
                                                                <RowDefinition />
                                                            </Grid.RowDefinitions>
                                                            <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                                <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                                    <Grid>
                                                                        <Grid.Style>
                                                                            <Style TargetType="Grid">
                                                                                <Setter Property="Width">
                                                                                    <Setter.Value>
                                                                                        <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                            <Binding ElementName="fGiaNguonVonVND" Path="ActualWidth"/>
                                                                                            <Binding ElementName="fGiaNguonVonUSD" Path="ActualWidth"/>

                                                                                            <!--<Binding ElementName="fGiaNguonVonEUR" Path="ActualWidth"/>
                                                                                            <Binding ElementName="fGiaNguonVonNgoaiTeKhac" Path="ActualWidth"/>-->
                                                                                        </MultiBinding>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Grid.Style>
                                                                        <TextBlock HorizontalAlignment="Center" Text="TỔNG GIÁ TRỊ DỰ TOÁN PHÊ DUYỆT"/>
                                                                    </Grid>
                                                                </Canvas>
                                                            </Border>
                                                            <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                                <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                            </Border>
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridColumn.HeaderTemplate>
                                            </component:DataGridTextColumn>
                                            <component:DataGridTextColumn  
                                            x:Name="fGiaNguonVonUSD"
                                            Header="USD"
                                            MinWidth="120"
                                            IsReadOnly="True"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding FGiaTriUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                            HeaderTemplate="{StaticResource RightHeader}"/>
                                            <!--<component:DataGridTextColumn  
                                            x:Name="fGiaNguonVonEUR"
                                            Header="EUR"
                                            MinWidth="100"
                                            IsReadOnly="True"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding FGiaTriEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                            HeaderTemplate="{StaticResource CenterHeader}"/>
                                            <component:DataGridTextColumn  
                                            x:Name="fGiaNguonVonNgoaiTeKhac"
                                            Header="Ngoại tệ khác"
                                            MinWidth="130"
                                            IsReadOnly="True"
                                            StringFormat="{}{0:N0}"
                                            Binding="{Binding FGiaTriNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                            ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                            EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                            HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                            HeaderTemplate="{StaticResource RightHeader}"/>-->
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                                <StackPanel Grid.Row="3"  Grid.Column="0"  Orientation="Vertical" x:Name="Stack2">
                                    <DataGrid
                                Visibility="Hidden"
                                x:Name="dgdNHKeHoachLuaChonNhaThauNguonVon2Detail"
                                Margin="0 5 0 0"
                                MaxHeight="500px"
                                VerticalAlignment="Top"
                                BorderThickness="1"
                                CanUserResizeColumns="True"
                                CanUserAddRows="False"
                                AutoGenerateColumns="False"
                                ScrollViewer.CanContentScroll="True"
                                GridLinesVisibility="All"
                                HorizontalScrollBarVisibility="Auto"
                                FrozenColumnCount="0"
                                Width="{Binding ElementName=Stack2, Path=ActualWidth}"
                                BeginningEdit="dgdNhDaKHLCNTNguonVonDetail_BeginningEdit"
                                IsReadOnly="{Binding BIsShowDetail}"
                                Style="{StaticResource MaterialDesignDataGrid}"
                                CellStyle="{StaticResource DataGridCellDetail}"
                                RowStyle="{StaticResource DataGridRowDetail}"
                                SelectedItem="{Binding SelectedNguonVonView}"
                                ItemsSource="{Binding ItemNguonVonView}">
                                        <DataGrid.Resources>
                                            <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                                        </DataGrid.Resources>
                                        <DataGrid.Columns>
                                            <component:DataGridTextColumn  
                                x:Name="fGiaNguonVonVNDPheDuyet"
                                Header="VND"
                                MinWidth="120"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriPheDuyetVND, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                                <DataGridColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition />
                                                                <RowDefinition />
                                                            </Grid.RowDefinitions>
                                                            <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                                <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                                    <Grid>
                                                                        <Grid.Style>
                                                                            <Style TargetType="Grid">
                                                                                <Setter Property="Width">
                                                                                    <Setter.Value>
                                                                                        <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                            <Binding ElementName="fGiaNguonVonVNDPheDuyet" Path="ActualWidth"/>
                                                                                            <Binding ElementName="fGiaNguonVonUSDPheDuyet" Path="ActualWidth"/>

                                                                                            <!--<Binding ElementName="fGiaNguonVonEURPheDuyet" Path="ActualWidth"/>
                                                                                            <Binding ElementName="fGiaNguonVonNgoaiTeKhacPheDuyet" Path="ActualWidth"/>-->
                                                                                        </MultiBinding>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Grid.Style>
                                                                        <TextBlock HorizontalAlignment="Center" Text="TỔNG GIÁ TRỊ GÓI THẦU  PHÊ DUYỆT"/>
                                                                    </Grid>
                                                                </Canvas>
                                                            </Border>
                                                            <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                                <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                            </Border>
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridColumn.HeaderTemplate>
                                            </component:DataGridTextColumn>

                                            <component:DataGridTextColumn  
                                x:Name="fGiaNguonVonUSDPheDuyet"
                                Header="USD"
                                MinWidth="120"
                                IsReadOnly="True"
                                Width="*"
                                Binding="{Binding FGiaTriPheDuyetUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource CenterHeader}"/>

                                            <!--<component:DataGridTextColumn  
                                x:Name="fGiaNguonVonEURPheDuyet"
                                Header="EUR"
                                MinWidth="100"
                                StringFormat="{}{0:N0}"
                                IsReadOnly="True"
                                Binding="{Binding FGiaTriPheDuyetEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource CenterHeader}"/>

                                            <component:DataGridTextColumn  
                                x:Name="fGiaNguonVonNgoaiTeKhacPheDuyet"
                                Header="Ngoại tệ khác"
                                MinWidth="130"
                                StringFormat="{}{0:N0}"
                                IsReadOnly="True"
                                Binding="{Binding FGiaTriPheDuyetNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource RightHeader}"/>-->
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </Grid>
                            <StackPanel Grid.Row="0" Grid.Column="0"  Margin="-2 -35 0 10" >
                                <Grid
                            Visibility="{Binding IsVisibleTiGiaNhap, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Grid.Row="0"
                                    
                            Grid.Column="0"
                            Margin="0 5 0 0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Text="1 USD = " VerticalAlignment="Bottom"/>
                                    <TextBox
                                Grid.Column="1"
                                PreviewTextInput="NumberValidationTextBox"
                                TextAlignment="Center"
                                IsReadOnly="True"
                                Text="{Binding FTiGiaNhap, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, TargetNullValue={x:Static sys:String.Empty}}"/>
                                    <TextBlock Grid.Column="2" Text=" VND" />
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Grid.Row="0" Grid.Column="1" Margin="0 10 0 0" x:Name="Stack3">
                            <TextBlock Margin="0 0 0 0" FontWeight="SemiBold">THÔNG TIN CHI PHÍ</TextBlock>
                            <DataGrid
                                x:Name="dgdNHKeHoachLuaChonNhaThauChiPhiDetail"
                                MaxHeight="500px"
                                Margin="0 15 0 0"
                                VerticalAlignment="Top"
                                BorderThickness="1"
                                CanUserResizeColumns="True"
                                FrozenColumnCount="4"
                                CanUserAddRows="False"
                                AutoGenerateColumns="False"
                                ScrollViewer.CanContentScroll="True"
                                GridLinesVisibility="All"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollBarVisibility="Auto"
                                BeginningEdit="dgdNhDaKHLCNTChiPhiDetail_BeginningEdit"
                                ScrollViewer.ScrollChanged="dgdNHKeHoachLuaChonNhaThauChiPhiDetail_ScrollChanged"
                                Width="{Binding ElementName=Stack3, Path=ActualWidth}"
                                IsReadOnly="{Binding BIsShowDetail}"
                                Style="{StaticResource MaterialDesignDataGrid}"
                                CellStyle="{StaticResource DataGridCellDetail}"
                                RowStyle="{StaticResource DataGridRowDetail}"
                                SelectedItem="{Binding SelectedChiPhi}"
                                ItemsSource="{Binding ItemChiPhi}">
                                <DataGrid.Resources>
                                    <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridCheckBoxColumn
                                        MinWidth="60"
                                        x:Name="ckChiPhi"
                                        Binding="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        ElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnStyle}"
                                        EditingElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnEditingStyle}">
                                        <DataGridCheckBoxColumn.Header>
                                            <Border Background="Transparent">
                                                <CheckBox IsChecked="{Binding Data.SelectAllChiPhi, Source={StaticResource DataContextProxy}}" />
                                            </Border>
                                        </DataGridCheckBoxColumn.Header>
                                        <DataGridCheckBoxColumn.HeaderStyle>
                                            <Style
                                        TargetType="{x:Type DataGridColumnHeader}"
                                        BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center" />
                                            </Style>
                                        </DataGridCheckBoxColumn.HeaderStyle>
                                    </DataGridCheckBoxColumn>

                                    <DataGridTextColumn
                                        x:Name="sMaOrderChiPhi"
                                        MinWidth="60"
                                        Header="STT"
                                        Binding="{Binding SMaOrder}"
                                        IsReadOnly="True"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailCenterStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <DataGridTextColumn
                                        x:Name="sTenChiPhi"
                                        Header="Tên chi phí"
                                        MinWidth="150"
                                        Binding="{Binding STenChiPhi}"
                                        IsReadOnly="True"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                        ElementStyle="{StaticResource DataGridTextColumnStyleWrap}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <DataGridTextColumn
                                        x:Name="sTenNguonVon"
                                        Header="Tên nguồn vốn"
                                        Width="*"
                                        MinWidth="150"
                                        Binding="{Binding STenNguonVon}"
                                        IsReadOnly="True"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                        ElementStyle="{StaticResource DataGridTextColumnStyleWrap}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiVND"
                                        Header="VND"
                                        MinWidth="120"
                                        IsReadOnly="True"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                        <DataGridColumn.HeaderTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                        <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                            <Grid>
                                                                <Grid.Style>
                                                                    <Style TargetType="Grid">
                                                                        <Setter Property="Width">
                                                                            <Setter.Value>
                                                                                <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                    <Binding ElementName="fGiaChiPhiVND" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaChiPhiUSD" Path="ActualWidth"/>

                                                                                    <!--<Binding ElementName="fGiaChiPhiEUR" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaChiPhiNgoaiTeKhac" Path="ActualWidth"/>-->
                                                                                </MultiBinding>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </Grid.Style>
                                                                <TextBlock HorizontalAlignment="Center" Text="{Binding Data.SHeaderGiaTriPheDuyet, Source={StaticResource DataContextProxy}}"/>
                                                            </Grid>
                                                        </Canvas>
                                                    </Border>
                                                    <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                        <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridColumn.HeaderTemplate>
                                    </component:DataGridTextColumn>

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiUSD"
                                        Header="USD"
                                        MinWidth="120"
                                        IsReadOnly="True"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource RightHeader}"/>

                                    <!--<component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiEUR"
                                        Header="EUR"
                                        MinWidth="100"
                                        IsReadOnly="True"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource CenterHeader}"/>

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiNgoaiTeKhac"
                                        Header="Ngoại tệ khác"
                                        MinWidth="120"
                                        IsReadOnly="True"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource RightHeader}"/>-->

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiVNDPheDuyet"
                                        Header="VND"
                                        MinWidth="120"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriPheDuyetVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                        <DataGridColumn.HeaderTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                        <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                            <Grid>
                                                                <Grid.Style>
                                                                    <Style TargetType="Grid">
                                                                        <Setter Property="Width">
                                                                            <Setter.Value>
                                                                                <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                    <Binding ElementName="fGiaChiPhiVNDPheDuyet" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaChiPhiUSDPheDuyet" Path="ActualWidth"/>

                                                                                    <!--<Binding ElementName="fGiaChiPhiEURPheDuyet" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaChiPhiNgoaiTeKhacPheDuyet" Path="ActualWidth"/>-->
                                                                                </MultiBinding>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </Grid.Style>
                                                                <TextBlock HorizontalAlignment="Center" Text="GIÁ TRỊ GÓI THẦU  PHÊ DUYỆT"/>
                                                            </Grid>
                                                        </Canvas>
                                                    </Border>
                                                    <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                        <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridColumn.HeaderTemplate>
                                    </component:DataGridTextColumn>

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiUSDPheDuyet"
                                        Header="USD"
                                        MinWidth="120"
                                        IsReadOnly="True"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriPheDuyetUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource RightHeader}"/>

                                    <!--<component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiEURPheDuyet"
                                        Header="EUR"
                                        MinWidth="100"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriPheDuyetEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource CenterHeader}"/>

                                    <component:DataGridTextColumn  
                                        x:Name="fGiaChiPhiNgoaiTeKhacPheDuyet"
                                        Header="Ngoại tệ khác"
                                        MinWidth="120"
                                        StringFormat="{}{0:N0}"
                                        Binding="{Binding FGiaTriPheDuyetNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                        ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                        EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                        HeaderTemplate="{StaticResource RightHeader}"/>-->

                                    <DataGridTemplateColumn MinWidth="80">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button 
                                            Margin="-15"
                                            Style="{StaticResource MaterialDesignFlatButton}" FontSize="12" Height="25"
                                            Visibility="{Binding BHaveHangMuc, Converter={StaticResource BooleanToVisibilityConverter}}" 
                                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=DataContext.ShowHangMucDetailCommand}"
                                            IsEnabled="{Binding IsChecked}">Chi tiết</Button>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                            <DockPanel>
                                <Border BorderBrush="{DynamicResource MaterialDesignDivider}" BorderThickness="1">
                                    <ScrollViewer x:Name="ScrolldgdNHKeHoachLuaChonNhaThauChiPhiDetailFooter" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                                        <StackPanel Orientation="Horizontal">
                                            <Grid>
                                                <Grid.Width>
                                                    <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                        <Binding ElementName="ckChiPhi" Path="ActualWidth"/>
                                                        <Binding ElementName="sMaOrderChiPhi" Path="ActualWidth"/>
                                                        <Binding ElementName="sTenChiPhi" Path="ActualWidth"/>
                                                        <Binding ElementName="sTenNguonVon" Path="ActualWidth"/>
                                                    </MultiBinding>
                                                </Grid.Width>
                                                <TextBlock TextAlignment="Right" FontWeight="Bold" Margin="16 8 16 8" Text="Tổng chi phí:" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaChiPhiVND, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaChiPhiUSD, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>

                                            <!--<Grid Width="{Binding ElementName=fGiaChiPhiEUR, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaChiPhiNgoaiTeKhac, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>-->
                                            <Grid Width="{Binding ElementName=fGiaChiPhiVNDPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumChiPhi.FGiaTriPheDuyetVND, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}}" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaChiPhiUSDPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumChiPhi.FGiaTriPheDuyetUSD, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>

                                            <!--<Grid Width="{Binding ElementName=fGiaChiPhiEURPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumChiPhi.FGiaTriPheDuyetEUR, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaChiPhiNgoaiTeKhacPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumChiPhi.FGiaTriPheDuyetNgoaiTeKhac, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>-->

                                        </StackPanel>
                                    </ScrollViewer>
                                </Border>
                            </DockPanel>
                        </StackPanel>
                    </Grid>
                    <Grid Grid.Row="1" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Orientation="Vertical" Grid.Row="0">
                            <TextBlock Margin="0 10 0 0" FontWeight="SemiBold">THÔNG TIN HẠNG MỤC</TextBlock>
                            <StackPanel Orientation="Horizontal">
                                <Grid Width="{Binding ElementName=ckHangMuc, Path=ActualWidth}">
                                </Grid>
                                <Grid Width="{Binding ElementName=sMaOrder, Path=ActualWidth}">
                                </Grid>
                                <Grid Width="{Binding ElementName=sTenNguonVonHangMuc, Path=ActualWidth}">
                                </Grid>
                                <Grid Width="{Binding ElementName=sTenChiPhiHangMuc, Path=ActualWidth}">
                                </Grid>
                                <Grid Width="{Binding ElementName=sTenHangMuc, Path=ActualWidth}">
                                    <TextBox
                                    Margin="0 0 5 0"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    materialDesign:HintAssist.Hint="Tên hạng mục"
                                    Text="{Binding NHGoiThauDetailHangMucFilter.STenHangMuc, UpdateSourceTrigger=PropertyChanged}"
                                    VerticalAlignment="Center">
                                        <TextBox.InputBindings>
                                            <KeyBinding Command="{Binding SearchCommand}" Key="Return" />
                                        </TextBox.InputBindings>
                                    </TextBox>
                                </Grid>
                                <Separator Style="{StaticResource SearchBarHorizontalDividerStyle}"/>
                                <Button Style="{StaticResource SearchBarBtnStyle}"  Command="{Binding SearchCommand}" >
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Search" />
                                        <TextBlock  Style="{StaticResource SearchBarBtnTextStyle}" Text="Tìm kiếm"/>
                                    </StackPanel>
                                </Button>
                                <Button 
                                Style="{StaticResource SearchBarBtnStyle}"
                                ToolTip="Filter"
                                Command="{Binding ResetFilterCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="FilterRemoveOutline" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0" x:Name="Stack4">
                            <DataGrid
                            x:Name="dgdNHKeHoachLuaChonNhaThauHangMucDetail"
                            VerticalAlignment="Top"
                            BorderThickness="1"
                            CanUserResizeColumns="True"
                            FrozenColumnCount="2"
                            CanUserAddRows="False"
                            AutoGenerateColumns="False"
                            ScrollViewer.CanContentScroll="True"
                            GridLinesVisibility="All"
                            HorizontalScrollBarVisibility="Auto"
                            VerticalScrollBarVisibility="Auto"
                            BeginningEdit="dgdNhDaKHLCNTHangMucDetail_BeginningEdit"
                            ScrollViewer.ScrollChanged="dgdNHKeHoachLuaChonNhaThauHangMucDetail_ScrollChanged"
                            Width="{Binding ElementName=Stack4, Path=ActualWidth}"
                            IsReadOnly="{Binding BIsShowDetail}"
                            Style="{StaticResource MaterialDesignDataGrid}"
                            CellStyle="{StaticResource DataGridCellDetail}"
                            RowStyle="{StaticResource DataGridRowDetail}"
                            SelectedItem="{Binding SelectedHangMuc}"
                            ItemsSource="{Binding ItemHangMuc}">
                                <DataGrid.Resources>
                                    <helper:BindingProxy x:Key="DataContextProxy" Data="{Binding}" />
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridCheckBoxColumn
                                x:Name="ckHangMuc"
                                Binding="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                ElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnStyle}"
                                EditingElementStyle="{StaticResource MaterialDesignDataGridCheckBoxColumnEditingStyle}">
                                        <!--<DataGridCheckBoxColumn.Header>
                                    <Border Background="Transparent">
                                        <CheckBox IsChecked="{Binding Data.SelectAllHangMuc, Source={StaticResource DataContextProxy}}" />
                                    </Border>
                                </DataGridCheckBoxColumn.Header>-->
                                        <DataGridCheckBoxColumn.HeaderStyle>
                                            <Style
                                        TargetType="{x:Type DataGridColumnHeader}"
                                        BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center" />
                                            </Style>
                                        </DataGridCheckBoxColumn.HeaderStyle>
                                        <DataGridCheckBoxColumn.CellStyle>
                                            <Style TargetType="DataGridCell">
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsEdit}" Value="False">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </DataGridCheckBoxColumn.CellStyle>
                                    </DataGridCheckBoxColumn>

                                    <DataGridTextColumn 
                                x:Name="sMaOrder"
                                MinWidth="100" Header="STT" 
                                IsReadOnly="True" 
                                Binding="{Binding SMaOrder}">
                                    </DataGridTextColumn>

                                    <DataGridTextColumn
                                x:Name="sTenNguonVonHangMuc"
                                Header="Tên nguồn vốn"
                                MinWidth="150"
                                Binding="{Binding STenNguonVon}"
                                IsReadOnly="True"
                                HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <DataGridTextColumn
                                x:Name="sTenChiPhiHangMuc"
                                Header="Tên chi phí"
                                MinWidth="250"
                                Binding="{Binding STenChiPhi}"
                                IsReadOnly="True"
                                HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <DataGridTextColumn
                                x:Name="sTenHangMuc"
                                Header="Tên hạng mục"
                                Width="*"
                                MinWidth="400"
                                Binding="{Binding STenHangMuc}"
                                IsReadOnly="True"
                                HeaderStyle="{StaticResource DataGridColumnHeaderCenter}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingStyle}"/>

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucVND"
                                Header="VND"
                                MinWidth="120"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                        <DataGridColumn.HeaderTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                        <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                            <Grid>
                                                                <Grid.Style>
                                                                    <Style TargetType="Grid">
                                                                        <Setter Property="Width">
                                                                            <Setter.Value>
                                                                                <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                    <Binding ElementName="fGiaHangMucVND" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaHangMucUSD" Path="ActualWidth"/>

                                                                                    <!--<Binding ElementName="fGiaHangMucEUR" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaHangMucNgoaiTeKhac" Path="ActualWidth"/>-->
                                                                                </MultiBinding>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </Grid.Style>
                                                                <TextBlock HorizontalAlignment="Center" Text="{Binding Data.SHeaderGiaTriPheDuyet, Source={StaticResource DataContextProxy}}"/>
                                                            </Grid>
                                                        </Canvas>
                                                    </Border>
                                                    <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                        <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridColumn.HeaderTemplate>
                                    </component:DataGridTextColumn>

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucUSD"
                                Header="USD"
                                MinWidth="120"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource RightHeader}"/>

                                    <!--<component:DataGridTextColumn  
                                x:Name="fGiaHangMucEUR"
                                Header="EUR"
                                MinWidth="100"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource CenterHeader}"/>

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucNgoaiTeKhac"
                                Header="Ngoại tệ khác"
                                MinWidth="120"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource RightHeader}"/>-->

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucVNDPheDuyet"
                                Header="VND"
                                MinWidth="120"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriPheDuyetVND, StringFormat={}{0:N0}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}">
                                        <DataGridColumn.HeaderTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <Border Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding), Converter={StaticResource HeaderPaddingConverter}}">
                                                        <Canvas Height="{Binding ElementName=HeaderGroup, Path=ActualHeight}">
                                                            <Grid>
                                                                <Grid.Style>
                                                                    <Style TargetType="Grid">
                                                                        <Setter Property="Width">
                                                                            <Setter.Value>
                                                                                <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                                                    <Binding ElementName="fGiaHangMucVNDPheDuyet" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaHangMucUSDPheDuyet" Path="ActualWidth"/>

                                                                                    <!--<Binding ElementName="fGiaHangMucEURPheDuyet" Path="ActualWidth"/>
                                                                                    <Binding ElementName="fGiaHangMucNgoaiTeKhacPheDuyet" Path="ActualWidth"/>-->
                                                                                </MultiBinding>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </Grid.Style>
                                                                <TextBlock HorizontalAlignment="Center" Text="GIÁ TRỊ GÓI THẦU  PHÊ DUYỆT"/>
                                                            </Grid>
                                                        </Canvas>
                                                    </Border>
                                                    <Border
                                                Grid.Row="1"
                                                Padding="{Binding RelativeSource={RelativeSource Self}, Path=(wpf:DataGridAssist.ColumnHeaderPadding)}"
                                                BorderThickness="0 1 1 0"
                                                BorderBrush="{Binding HorizontalGridLinesBrush, RelativeSource={RelativeSource AncestorType=DataGrid}}">
                                                        <TextBlock Name="HeaderGroup" TextAlignment="Center" Text="{Binding}"/>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridColumn.HeaderTemplate>
                                    </component:DataGridTextColumn>

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucUSDPheDuyet"
                                Header="USD"
                                MinWidth="120"
                                IsReadOnly="True"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriPheDuyetUSD, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource RightHeader}"/>

                                    <!--<component:DataGridTextColumn  
                                x:Name="fGiaHangMucEURPheDuyet"
                                Header="EUR"
                                MinWidth="100"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriPheDuyetEUR, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource CenterHeader}"/>

                                    <component:DataGridTextColumn  
                                x:Name="fGiaHangMucNgoaiTeKhacPheDuyet"
                                Header="Ngoại tệ khác"
                                MinWidth="120"
                                StringFormat="{}{0:N0}"
                                Binding="{Binding FGiaTriPheDuyetNgoaiTeKhac, StringFormat={}{0:N2}, Converter={StaticResource NumberToStringEmptyConverter}, UpdateSourceTrigger=LostFocus}"
                                ElementStyle="{StaticResource DataGridTextColumnDetailRightStyle}"
                                EditingElementStyle="{StaticResource DataGridTextColumnEditingRightCell}"
                                HeaderStyle="{StaticResource DataGridColumnHeaderNoBorder}"
                                HeaderTemplate="{StaticResource RightHeader}"/>-->
                                </DataGrid.Columns>
                            </DataGrid>
                            <DockPanel Grid.Row="2">
                                <Border BorderBrush="{DynamicResource MaterialDesignDivider}" BorderThickness="1">
                                    <ScrollViewer x:Name="ScrollNHKeHoachLuaChonNhaThauHangMucDetailFooter" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                                        <StackPanel Orientation="Horizontal">
                                            <Grid>
                                                <Grid.Width>
                                                    <MultiBinding Converter="{StaticResource MultipleWidthConverter}">
                                                        <Binding ElementName="ckHangMuc" Path="ActualWidth"/>
                                                        <Binding ElementName="sMaOrder" Path="ActualWidth"/>
                                                        <Binding ElementName="sTenNguonVonHangMuc" Path="ActualWidth"/>
                                                        <Binding ElementName="sTenChiPhiHangMuc" Path="ActualWidth"/>
                                                        <Binding ElementName="sTenHangMuc" Path="ActualWidth"/>
                                                    </MultiBinding>
                                                </Grid.Width>
                                                <TextBlock TextAlignment="Right" FontWeight="Bold" Margin="16 8 16 8" Text="Tổng hạng mục:" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaHangMucVND, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaHangMucUSD, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>

                                            <!--<Grid Width="{Binding ElementName=fGiaHangMucEUR, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaHangMucNgoaiTeKhac, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" />
                                            </Grid>-->
                                            <Grid Width="{Binding ElementName=fGiaHangMucVNDPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumHangMuc.FGiaTriPheDuyetVND, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N0}}" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaHangMucUSDPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumHangMuc.FGiaTriPheDuyetUSD, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>

                                            <!--<Grid Width="{Binding ElementName=fGiaHangMucEURPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumHangMuc.FGiaTriPheDuyetEUR, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>
                                            <Grid Width="{Binding ElementName=fGiaHangMucNgoaiTeKhacPheDuyet, Path=ActualWidth}">
                                                <TextBlock FontWeight="Bold" Margin="16 8 16 8" TextAlignment="Right" Text="{Binding ObjSumHangMuc.FGiaTriPheDuyetNgoaiTeKhac, Converter={StaticResource NumberToStringEmptyConverter}, StringFormat={}{0:N2}}" />
                                            </Grid>-->

                                        </StackPanel>
                                    </ScrollViewer>
                                </Border>
                            </DockPanel>
                        </StackPanel>
                    </Grid>
                </StackPanel>

            </ScrollViewer>
            <StackPanel  Grid.Row="2" Orientation="Horizontal" Margin="0 15 0 0" HorizontalAlignment="Right">
                <Button 
                    IsDefault="True"
                    Margin="5 0 0 0"
                    Visibility="{Binding BNotVisibleDetail}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Command="{Binding SaveDataCommand}"
                    CommandParameter="{Binding ElementName=NHKeHoachLuaChonNhaThauDetailView}">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ContentSave" />
                        <TextBlock Style="{StaticResource SearchBarBtnTextStyle}">Lưu dữ liệu</TextBlock>
                    </StackPanel>
                </Button>
                <Button
                    IsCancel="True"
                    Margin="5 0 0 0"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    CommandParameter="{Binding ElementName=NHKeHoachLuaChonNhaThauDetailView}"
                    Command="{Binding OnCloseCommand}">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="CloseOutline" />
                        <TextBlock Style="{StaticResource SearchBarBtnTextStyle}">Đóng</TextBlock>
                    </StackPanel>
                    <!--<Button.CommandParameter>
                        <system:Boolean>False</system:Boolean>
                    </Button.CommandParameter>-->
                </Button>
            </StackPanel>
        </Grid>
    </materialDesign:DialogHost>
</Window>